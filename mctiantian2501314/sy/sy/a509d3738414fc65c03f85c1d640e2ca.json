[
  {
    "bookSourceGroup": "H小说",
    "bookSourceName": "🌈八叉书库",
    "bookSourceType": 0,
    "bookSourceUrl": "https://八叉书库b.luoyacheng.ip-ddns.com",
    "bookUrlPattern": "https://.+/book/\\d+\\.html",
    "concurrentRate": "1200",
    "customOrder": 7,
    "enabled": true,
    "enabledCookieJar": true,
    "enabledExplore": true,
    "exploreUrl": "@js:\nlet banben=\"2.0.1\";\neval(String(source.loginUrl));\nlet surl = `{{getsurl()}}`;\nlet jmtxt=java.base64Decode('6YO95biC5r+A5oOFLOaJkueBsOS5seS8pizmg4XoibLmrabkvqAs57u/5bi95oOF5oCALOa3t+S5seS/ruS7mSzosIPmlZnlhbvmiJA=').split(',');\nvar obj = {\n\t最近更: {\n\t\t\"url\": \"/sort/0/{{page}}.html\",\n\t\t\"fg\": 9},\n\t\t'新(肉)':{\n\t\t\"url\": \"/sort/7/{{page}}.html\",\n\t\t\"fg\": 1},\n\t最近入库: {\n\t\t\"url\": \"/top/postdate/{{page}}.html\",\n\t\t\"fg\": 10},\n\t\t\n\t最近完: {\n\t\t\"url\": \"/modules/article/articlelist.php?fullflag=1&page={{page}}\",\n\t\t\"fg\": 9,\n\t\t\"wrap\": true},\n\t\t'结(肉)':{\n\t\t\"url\": \"/modules/article/articlelist.php?sortid=7&fullflag=1&page={{page}}\",\n\t\t\"fg\": 1},\n\t签约新书: {\n\t\t\"url\": \"/top/signtime/{{page}}.html\",\n\t\t\"fg\": 10},\n\t\t\n\t字数榜: {\n\t\t\"url\": \"/top/words/{{page}}.html\",\n\t\t\"wb\": true},\n\t收藏榜: {\n\t\t\"url\": \"/top/goodnum/{{page}}.html\"},\n\t新书榜: {\n\t\t\"url\": \"/top/newhot/{{page}}.html\"},\n\t\t\n\t总点击: {\n\t\t\"url\": \"/top/allvisit/{{page}}.html\",\n\t\t\"wb\": true},\n\t月点击: {\n\t\t\"url\": \"/top/monthvisit/{{page}}.html\"},\n\t周点击: {\n\t\t\"url\": \"/top/weekvisit/{{page}}.html\"},\n\t\t\n\t总推荐: {\n\t\t\"url\": \"/top/allvote/{{page}}.html\",\n\t\t\"wb\": true},\n\t月推荐: {\n\t\t\"url\": \"/top/monthvote/{{page}}.html\"},\n\t周推荐: {\n\t\t\"url\": \"/top/weekvote/{{page}}.html\"},\n\t[jmtxt[0]]: {\n\t\t\"url\": \"/modules/article/articlefilter.php?order=lastupdate&page={{page}}&sortid=7&typeid=701\",\n\t\t\"wb\": true},\n\t[jmtxt[1]]: {\n\t\t\"url\": \"/modules/article/articlefilter.php?order=lastupdate&page={{page}}&sortid=7&typeid=702\"},\n\t[jmtxt[2]]: {\n\t\t\"url\": \"/modules/article/articlefilter.php?order=lastupdate&page={{page}}&sortid=7&typeid=703\"},\n\t[jmtxt[3]]: {\n\t\t\"url\": \"/modules/article/articlefilter.php?order=lastupdate&page={{page}}&sortid=7&typeid=704\",\n\t\t\"wb\": true},\n\t[jmtxt[4]]: {\n\t\t\"url\": \"/modules/article/articlefilter.php?order=lastupdate&page={{page}}&sortid=7&typeid=705\"},\n\t[jmtxt[5]]: {\n\t\t\"url\": \"/modules/article/articlefilter.php?order=lastupdate&page={{page}}&sortid=7&typeid=706\"},\n\t\t玄幻奇幻: {\n\t\t\"url\": \"/sort/1/{{page}}.html\",\n\t\t\"wb\": true},\n\t都市青春: {\n\t\t\"url\": \"/sort/2/{{page}}.html\"},\n\t武侠仙侠: {\n\t\t\"url\": \"/sort/3/{{page}}.html\"},\n\t\t搜索: {\n\t\t\turl: \t`{{\n\t\t\t\tlet surl = getsurl();\n\t\t\t\tif (page == 1) {\n\t\t\t\t\ttry {\n\t\t\t\t\tlet [cb,cf] = colorz();\n\t\t\t\t\tsvg=\\`<svg width=\"990\" height=\"300\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"100%\" height=\"150%\" fill=\"#\\${cb}\"/><text fill=\"#\\${cf}\" text-anchor=\"middle\" dominant-baseline=\"middle\" stroke=\"#000000\" stroke-width=\"1\" font-weight=\"bold\"><tspan x=\"50%\" dy=\"30%\" font-size=\"100\">请输入搜索关键词</tspan><tspan x=\"50%\" dy=\"50%\" font-size=\"50\">此处搜索不支持完整书名</tspan></text></svg>\\`;\n\tsvg=java.base64Encode(svg);\n\tkeyy=java.getVerificationCode('data:image/svg+xml;base64,'+svg);\n\t\t\t\t\t} catch(err) {keyy='系统';\n\t\t\t\t\tPackages.java.lang.Thread.sleep(500);\n\t\t\t\t\tjava.toast('使用默认关键词“系统”');}\n\t\t\t\t\tsource.put('keyy',keyy);\n\t\t\t\t\t\t}\n\t\t\t\telse keyy = source.get('keyy');\n\t\t\t\turl =\tsurl+'/modules/article/search.php?searchkey='+keyy+'&searchtype=all&page='+page;\n\t\t\t\tlet option={};\n\t\t\t\toption[\"headers\"]=gethd();\n\t\t\t\turl+','+JSON.stringify(option);\n\t\t\t}}`,\n\t\t\t\"fb\": 0.3,\n\t\t\t\"wb\": true},\n\t我的书架: {\n\t\t\"url\": `{{\n\t\t\tif (page == 1) {\n\t\tlet surl = getsurl();\n\t\tlet option={};option[\"headers\"]=gethd();\n\t\tlet ck=source.getLoginHeader()||'';\n\t\tif (ck) option[\"headers\"][\"Cookie\"]=ck;\n\t\tck ? surl+'/modules/article/bookcase.php,'+JSON.stringify(option) : java.longToast('请登录账号'),'data:;base64,QQ,{\"type\":\"fx\"}';\n\t\t} else 'data:;base64,QQ,{\"type\":\"fx\"}';\n\t\t}}`,\n\t\t\"fb\": 0.3}\n\t}\n\nvar sort = [];\npush = (title, url, size, wrap, cc) => sort.push({\n    \"title\": title,\n    \"url\": url.startsWith(\"{{\") ? url : url ? surl + url + `{{',{\"headers\":'+JSON.stringify(gethd())+\"}\"}}`: \"\",\n    \"style\": {\n      layout_flexGrow: size || 1,\n      layout_flexBasisPercent: cc || -1,\n      layout_wrapBefore: wrap ? true : false\n     }\n  });\n\nfor (x in obj) {\npush(x, obj[x].url, obj[x].fg, obj[x].wb, obj[x].fb);\n}\n\n//版本号\npush(\"版本号:\"+banben+\"　点我获取地址\", `{{if (page==1) {webfb();gengxin();}\n'data:;base64,QQ,{\"type\":\"fx\"}'}}`, 1, true);\npush(\"测速/更新\",`{{eval(String(source.loginUrl));gengxin(); Packages.java.lang.Thread.sleep(100); ceshi(); 'data:;base64,QQ,{\"type\":\"fx\"}'}}`, 1);\n\nJSON.stringify(sort);",
    "jsLib": "var fbyurl='https://8xsk.org'; //发布页链接\nvar mrurl='https://bachashuku.org'; //默认地址\nᝰ꧁ËÚ8Ç¾Q¹àe\u001a«@rBñ¹\u00062\u0017KTÎþøö\u0018Ô5\u001dK·ó,«·L7ÁjjüA0Á²}^ái¡\u0012H,øô?hÓs\fj,ðè#7 Â\u0012Í6ÜCfõê\u000bàbìÀx¥)%\u0011Ãq;(\\-j]JVµ%k0?À¼cf\u00070@OÊ?±\u0015îléÇÔv\u001dE:/ÀSm\u0012\bb[¢ðÂOtüÍcP\b»M®5\rÒoÁhõ´Û8\u0003Y~â;Ì\u0002ï\u001c¾\fù\u00059ò?Sê\u0012$ª[è\u0014C\u0018\n#e-éK%ï³%u\u0015q r@ï\bIuH\u0012UÎ&ZpÛÔÿ»\f\u0018$K£:ûàd3_èÑ`\u0006±ÔÞÓ@5=_\u0007ÞÛ¯[ÀD\"\u0011Ä±B£¬ô4ùt\\\u0011§¤;cÑ\f\u0019v÷fµ'\u0019Ì\r\f¦]6\u0016Ñ:ëèrü\u0018\f9ß`ÃC\u0006,¿\u0018©[ª\u001cìQ\u001e\u0003ëÖµ@÷ÛGC@A´\u000fiú:óXß¾Ãºú Þ\u0005Ô#cÚrÙË§Nÿ\u0007=ãàíØXb×° hN`Ìº\u0019\u001bmÝ\u000fôÛ\u000bE¢ëù\u001bÌ½O`Á¡iù\u0019N\r.)v>\u0013Ü<ù¯\u000eú\u0015\u0007¹¥Ö\u0019Õû4ÄÜJZY1bêñ²h,aÌ«\u001bw\u0006g©Ô¼ã¡u¤·Ê¼óÒý£\"®´ÑUÉ+Çý\u0018Ò;QkÙKN¹¥ën3Û¹ÔÇ'³H\u0000(öU°\u001a±\u000b\u001eaWPë²ÈJÂ|-ÙbùÄ\rz¯äÊ\u001eU£Y¿*Ýø }.G¶û&4 Þþì\u0005\\+àíN\u0005\u0007¢îqVÛÞÎõ\u001c[&¸Qd<±¼õíÎËô\u0006ÁÛ¿K¦K>¸gM^B\fnI®zi/\"ÛqN\u00025\u0012¢\u000ev!{\u0016vÁbI¥sÌ&Ñíþ¾z¼;\u001e\u001cÏÜ2´Aù\u0016\u0005ÿ¸x\no\u000f=XSuî:\bo¯\u0000Â_\fâºä\u001f³â#\u0005LH/#3)_9`²Â¹\u0014enò}ËÁZfÖA\u0011ä÷QÞ¾bõøÃ%Ù\u0018úq(\u001eG/ÅQ÷¨LÙc\u0000áé-ßtQ8d³?\u0002,YB;@íß¬à³ù|ZÒ´ÞL+Þ.\u0016ôà²ï\")oX\u001b6\rÖ¥HähJù\u0007Bàä\u0000Në=TéuhHð¬ß?\u0001®á\u0017³8\tDãú3SÖ;\u001dÃÂ e\u0011C#\u0014H»ðQ@¦\"Zu\u0010ó#ÌbB×õ2whdÄù¶\u0003ÿÆ´dÎÎy\u0010Üðl½ÕpaèL\\¯fÇÁ$whqòw7±Á\u001bê¯¾Ôk\u0004Ðáéu>R=\u00135ó: ²\u001dÖ}Ù¦\u001c¾ÖO\u001bD\u0011k}\fh\u0006 Y\u0001²\rf!û$óï»s,e\u0002)ágÕu6Æõ?³^\u0005\u001b¨\u0000\u0001keïä\u00033B]fÂP\u0006\u0002\në`±ÞS\u0014ñq^Lº J\u0000&Øø|fX.ûI±\fyµ-ç¤$§î­Ãðö^yMWË.\u000e?\tëG¶\u0015\u0019üøMMøÑ¢­7È~Ðê#X­\u0002\u000b^mÔ\bZÀ(ZiV8iMZL4꧂꧂\nfunction gets(x, r) {\nreturn r==undefined?\nthis.java.getString(x)+'':\nPackages.io.legado.app.model.analyzeRule.AnalyzeRule().getString(x,r)+'';}\nfunction gete(x, r) {\nreturn r==undefined?\nthis.java.getElement(x): Packages.io.legado.app.model.analyzeRule.AnalyzeRule().setContent(r).getElement(x);}\n\nfunction colorz() {\n\tconst {java, source} = this;\n\tlet cb,cf;\n\ttry {\n\t\tcb = source.getLoginInfoMap().get('封面背景颜色');\n\t\tif (cb=='') throw '空';\n\t\t} catch(err) {cb='151E27';}\n\ttry {\n\t\tcf = source.getLoginInfoMap().get('封面字体颜色');\n\t\tif (cf=='') throw '空';\n\t\t} catch(err) {cf='dddddd';}\nreturn [cb,cf];\n}\n\nu_a = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0';\ns_c_u_p = `\"Windows\"`;\ns_c_u = `\"Microsoft Edge\";v=\"135\", \"Not-A.Brand\";v=\"8\", \"Chromium\";v=\"135\"`;\nfunction gethdi(url) {\nconst {java, source, cookie} = this;\nlet surl=this.getsurl();\nlet hd={};\nhd[\"Accept-Language\"]=\"zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7\";\nhd[\"Referer\"]=surl;\nif (/http.{4}www/.test(surl))\nhd[\"User-Agent\"]=u_a;\nelse {\nlet ua=java.getWebViewUA()+'';\nhd[\"User-Agent\"]=ua;}\nhd[\"Sec-Fetch-Dest\"]=\"image\";\nhd[\"Sec-Fetch-Mode\"]=\"no-cors\";\nhd[\"Sec-Fetch-Site\"]=\"cross-site\";\nreturn url+','+JSON.stringify({\"headers\":hd});\n}\nfunction gethd() {\nconst {java, source, cookie} = this;\nlet surl=this.getsurl();\nlet hd={};\ncookie.removeCookie(surl);\ncookie.removeCookie(source.key);\nhd[\"Accept-Language\"]=\"zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7\";\nhd[\"Referer\"]=surl;\nif (/http.{4}www/.test(surl))\nhd[\"User-Agent\"]=u_a;\nelse {\nlet ua=java.getWebViewUA()+'';\nlet v=(ua.match(/Chrome\\/(\\d+)/)||[,'136'])[1];\nhd[\"User-Agent\"]=ua;\nhd[\"sec-ch-ua-platform\"]=`\"Android\"`;\nhd[\"sec-ch-ua\"]=`\"Chromium\";v=\"${v}\", \"Android WebView\";v=\"${v}\", \"Not.A/Brand\";v=\"99\"`;\nhd[\"sec-ch-ua-mobile\"]=\"?1\";}\nreturn hd;\n}\n\n\nfunction decodeEmail(n, c) {\n\tfunction hexToInt(e, t) {\n        var r = e.substr(t, 2);\n        return parseInt(r, 16);\n    }\n    var o = \"\", a = hexToInt(n, c), i = c + 2;\n    for (i; i < n.length; i += 2) {\n        var l = hexToInt(n, i) ^ a;\n        o += String.fromCharCode(l);\n    }\n        o = decodeURIComponent(escape(o));\n        return o\n}\n\n\nfunction gengxin(){\nconst {java, source} = this;\n\tlet url0='https://gitee.com/lyc486/yuedu2/commits/main/书源/八叉/8x_b.json?browser_history=0&page=1&per=4';\n\tlet rr0=java.get(url0,{'User-Agent': 'Mozilla/5.0 (Linux; Android 14)','X-Requested-With': 'XMLHttpRequest'}).body();\n\tlet \tgxlrr = com.jayway.jsonpath.JsonPath.read(rr0, '$.list[0:4].title');\n\tlet [gxlr, gxlr2, gxlr3, gxlr4] = gxlrr;\n\tlet banben =   String(source.exploreUrl).match(/let banben=\"([\\d\\.]+)\"/)[1];\n\tgxlr=String(gxlr).split(/^([^\\-]+)-/);\n\tgxlr[0]=='' ? '' : gxlr=['','0',gxlr[0]];\n\tlet gxts;\n\tif (gxlr[1]>banben){gxts=['更新','0,140,186'];}\n\telse {gxts= ['导入','76,175,80'];};\n\tlet htm = `<html>\n<head>\n<title>更新</title>\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=no\">\n<style>\ntable {\n\ttext-align: center;\n\tmargin: 2em auto 0 auto;\n\t}\nth span{font-size: 1.2em;}\n.ann {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\theight: 50vh;\n\t}\nbutton {\n\tbackground-color: rgb(${gxts[1]});\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 4px;\n\theight: 6vh;\n\twidth: 30vw;\n\toverflow: hidden;\n\t}\nbutton span {\n  cursor: pointer;\n  display: inline-block;\n  position: relative;\n  transition: 0.4s;\n}\nbutton span:after {\n  content: '>';\n  position: absolute;\n  opacity: 0;\n  top: 0;\n  right: 30px;\n  transition: 0.2s;\n}\nbutton:active span {\n  padding-right: 20px;\n}\nbutton:active span:after {\n  opacity: 1;\n  right: -40px;\n}\n</style>\n</head>\n<body>\n<table border=\"1\" cellspacing=\"0\">\n<th colspan=\"2\">最新日志：<span>${gxlr[2]}</span></th>\n<tr>\n<td>仓库版本：${gxlr[1]}</td>\n<td>本地版本：${banben}</td>\n</tr>\n<tr>\n<td colspan=\"2\" style=\"text-align: left;\">往期日志：${gxlr2}<br>　　　　　${gxlr3}<br>　　　　　${gxlr4}</td>\n</tr>\n</table>\n<div class=\"ann\">\n<a href=\"legado://import/importonline?src=https://gitee.com/lyc486/yuedu2/raw/main/书源/八叉/8x_b.json\">\n<button><span>${gxts[0]}</span></button>\n</a>\n</div>\n<a href=\"legado://import/importonline?src=https://cdn.jsdelivr.net/gh/Luoyacheng/yuedu@main/书源/八叉/8x_b.json\" style=\"font-size: 10px;\">备用链接</a>\n</body>\n</html>`;\nif(typeof this.book=='undefined'||gxts[0]=='更新') java.startBrowser(`data:text/html;base64,${java.base64Encode(htm)}`,'更新');\r\n}\n\nfunction tbshujia(iuu,iid){\nconst {java, source} = this;\nlet iuux=iuu+'/modules/article/addbookcase.php';\nlet iuuy=String(iuu+'/book/'+iid+'.html'); //需要转化否则报错\nlet tm = new Date().getTime();\nlet body = `bid=${iid}&ajax_request=${tm}`;\nlet option={};\noption[\"headers\"]=this.gethd();\noption[\"headers\"][\"Referer\"]=iuuy;\noption[\"method\"]=\"POST\";\noption[\"body\"]=body;\nlet ck=source.getLoginHeader()||'';\nif (String(ck).includes(\"jieqiUserInfo\")) {\noption[\"headers\"][\"Cookie\"]=ck;\nlet by = java.connect(iuux+','+JSON.stringify(option));\njava.longToast('\\n'+this.book.name+'：\\n'+by.body());\nreturn true;}\nreturn false;\n}\n\nfunction hmdjib(id,name){\nconst {java, source, cache} = this;\n\tlet hmd=cache.get('8xhmd')||'{}';\n\thmd=JSON.parse(hmd);\n\tlet i=false;\n\ttry {\n\t\tlet rgstr = source.getLoginInfoMap().get('正则书名黑名单');\n\t\tlet rg = eval(String(rgstr));\n\t\ti=rg.test(name);\n\t\t} catch(err) {}\n\ttry {\n\t\tif (i) {\n\t\tlet rgstr = source.getLoginInfoMap().get('正则书名白名单');\n\t\tlet rg = eval(String(rgstr));\n\t\t i=!rg.test(name);\n\t\t }\n\t\t} catch(err) {}\n\t\ti = i||(id in hmd);\n\t\treturn i;\n\t}\n\nOranges = `<path d=\"M646.4 763.6c150.1-15.8 267.1-142.7 267.1-297 0-164.9-133.7-298.7-298.7-298.7-154.8 0-282.1 117.8-297.2 268.7\" fill=\"#FA9F23\" p-id=\"5624\"></path><path d=\"M648.6 784.8l-4.5-42.4c67.7-7.1 130.3-39 176.3-89.7 46.3-51.1 71.7-117.2 71.7-186.1 0-74.1-28.8-143.7-81.2-196.1-52.4-52.4-122-81.2-196.1-81.2-69.2 0-135.5 25.6-186.6 72.2-50.8 46.3-82.5 109.2-89.3 177.3l-42.5-4.2c7.8-78.6 44.4-151.2 103-204.6 59-53.7 135.5-83.3 215.4-83.3 85.5 0 165.8 33.3 226.3 93.7 60.4 60.4 93.7 140.8 93.7 226.3 0 79.6-29.4 155.9-82.8 214.8-53 58.3-125.2 95.1-203.4 103.3z\" fill=\"#333333\" p-id=\"5625\"></path><path d=\"M161.5 832.4c116.6 116.6 305.7 116.6 422.4 0s116.6-305.7 0-422.4\" fill=\"#FA9F23\" p-id=\"5626\"></path><path d=\"M372.7 941.2c-85.5 0-165.8-33.3-226.3-93.7l30.2-30.2c52.4 52.4 122 81.2 196.1 81.2s143.7-28.8 196.1-81.2c52.4-52.4 81.2-122 81.2-196.1s-28.8-143.7-81.2-196.1l30.2-30.2c60.4 60.4 93.7 140.8 93.7 226.3S659.4 787 599 847.5c-60.5 60.4-140.8 93.7-226.3 93.7z\" fill=\"#333333\" p-id=\"5627\"></path><path d=\"M161.480941 832.416461a170.7 298.7 44.999 1 0 422.418218-422.432964 170.7 298.7 44.999 1 0-422.418218 422.432964Z\" fill=\"#FBE0C3\" p-id=\"5628\"></path><path d=\"M249.1 885.8c-9.3 0-18.4-0.7-27.2-2-30.5-4.6-55.9-16.8-75.5-36.4-19.6-19.6-31.8-45-36.4-75.5-4.2-28-1.7-59 7.4-92.4 18.1-66.2 60.5-135.2 119.5-194.2S364.9 384 431.1 366c33.3-9.1 64.4-11.6 92.4-7.4 30.5 4.6 55.9 16.8 75.5 36.4s31.8 45 36.4 75.5c4.2 28 1.7 59-7.4 92.4C609.9 629 567.5 698 508.5 757s-128 101.4-194.2 119.5c-22.9 6.2-44.7 9.3-65.2 9.3z m18-370.2c-53.8 53.8-92.4 116.1-108.5 175.2-15 55-8.6 99.9 18 126.5s71.5 33 126.5 18c59.2-16.1 121.4-54.7 175.2-108.5 53.8-53.8 92.4-116.1 108.5-175.2 15-55 8.6-99.9-18-126.5s-71.5-33-126.5-18c-59.1 16.2-121.4 54.7-175.2 108.5z\" fill=\"#333333\" p-id=\"5629\"></path><path d=\"M373.3 641.5h148.4c-16.2 23.8-35.8 47.6-58.5 70.2-28.9 28.9-59.7 52.9-90 71.1l0.1-141.3z m187.1-193.4c27 37.3 15.7 103.4-25.2 172.1H388.3l172.1-172.1zM351.9 656.6v138.2c-61.4 31.7-118.7 38.6-152.4 14.2l152.4-152.4z m-152.5-15.1h137.4L184.6 793.8c-24-33.9-16.9-91.1 14.8-152.3z m173.9-182.6c68.5-40.9 134.5-52.4 172-25.9l-172 172V458.9z m-91.1 71.8c22.5-22.5 46.1-42 69.7-58.1v147.6H211.4c17.6-29.1 40.4-58.6 67.8-86.5l3-3z\" fill=\"#F5A74A\" p-id=\"5630\"></path><path d=\"M625.8 266.5l-13.5 9.9c-1.9 1.4-4.6 1-6-0.9-0.6-0.9-0.9-1.9-0.8-3l1.8-16.7L592 249c-2.2-1-3.1-3.5-2.2-5.6 0.4-1 1.2-1.8 2.2-2.2l15.3-6.8-1.8-16.7c-0.3-2.3 1.4-4.4 3.8-4.7 1.1-0.1 2.1 0.2 3 0.8l13.5 9.9 13.5-9.9c1.9-1.4 4.6-1 6 0.9 0.6 0.9 0.9 1.9 0.8 3l-1.8 16.7 15.3 6.8c2.2 1 3.1 3.5 2.2 5.6-0.4 1-1.2 1.8-2.2 2.2l-15.3 6.8 1.8 16.7c0.3 2.3-1.4 4.4-3.8 4.7-1.1 0.1-2.1-0.2-3-0.8l-13.5-9.9z\" fill=\"#333333\" p-id=\"5631\"></path><path d=\"M799.4 313.5m-12.8 0a12.8 12.8 0 1 0 25.6 0 12.8 12.8 0 1 0-25.6 0Z\" fill=\"#333333\" p-id=\"5632\"></path><path d=\"M828.4 348.3m-12.8 0a12.8 12.8 0 1 0 25.6 0 12.8 12.8 0 1 0-25.6 0Z\" fill=\"#333333\" p-id=\"5633\"></path>`;\n\nfunction jinghuafm() {\nconst {java, source} = this;\t\nfunction splitString(str) {\n    const length = str.length;\n    if (length < 15) {\n        return length<9 ? [str] : [\n            str.slice(0, 7),\n            str.slice(7)\n        ].filter(s => s);\n    } else if (length < 20) {\n        return [\n            str.slice(0, 7),\n            str.slice(7,13),\n            str.slice(13)\n        ].filter(s => s);\n    }  else if (length < 24) {\n        return [\n            str.slice(0, 7),\n            str.slice(7,13),\n            str.slice(13,18),\n            str.slice(18)\n        ].filter(s => s);\n    } else {\n        return [\n            str.slice(0, 7),\n            str.slice(7, 13),\n            str.slice(13, 18),\n            str.slice(18, 22),\n            str.slice(22)\n        ].filter(s => s);\n    }\n}\nfunction pingString(ss) {\nlet rr='';\nlet l1=ss.length;\nfor (let i1=0; i1<l1; i1++) {\n\tlet c1=ss[i1], l2=c1.length;\n\tfor (let i2=0; i2<l2; i2++) {\n\t\tlet c2=c1.charAt(i2);\n\t\trr += `<tspan x=\"${100+180*ii}\" y=\"${180+170*(i2+i1)}\">${c2}</tspan>`;\n\t\t}\n\t\tii++;\n\t}\n\treturn rr;\n}\n\nlet [cb,cf] = colorz();\n\nlet bknm=String(this.book.name).replace(/\\.{2,}/,'…');\nbknm=bknm.match(/[a-z][a-z\\+一-ꀀ\\d…]+|[一-ꀀ\\da-z]{2,}(?:\\.\\d+[一-ꀀ]*|[…？])?|[一-ꀀ]/gi);\nlet hz='';\nlet ii=0;\n\nfor (let char of bknm) {\n\thz += pingString(splitString(char) );\n\t}\n\nlet svg = `<svg class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"5623\" width=\"100%\" height=\"100%\">\n<rect width=\"100%\" height=\"150%\" fill=\"#${cb}\"/>\n<g transform=\"scale(0.4) translate(1600,2500)\">${Oranges}</g>\n<text fill=\"#${cf}\" stroke=\"#000000\" stroke-width=\"2\" font-weight=\"bold\" font-size=\"150\" text-anchor=\"middle\" dominant-baseline=\"middle\">\n${hz}\n</text>\n</svg>`;\nsvg=java.base64Encode(svg);\nreturn 'data:image/svg+xml;base64,'+svg;\n}\n",
    "lastUpdateTime": 1753225192012,
    "loginCheckJs": "var pres = result.raw().priorResponse();\nvar isRedirect = pres!=null&&pres.isRedirect();\nif (isRedirect) {\n\tlet url=String(result.url()).match(/^https?:\\/\\/[^\\/]+\\//)[0];\n\tif (!/luoyacheng/.test(url)) {\n\t\tlet Info=source.getLoginInfoMap()||{};\n\t\tInfo['网址'] = url;\n\t\tsource.putLoginInfo(JSON.stringify(Info));\t}\n}\nvar code = result.code();\nif (code == 403) {\n\tjava.toast('\\n访问被拒绝');\n\t}\nelse if (code == 520) {\n\tjava.toast('\\nIP被拉黑');\n\t}\nresult",
    "loginUi": "[\n    {\n        name: \"网址\",\n        type: \"text\"\n    },\n    {\n        name: \"💍网址\",\n        type: \"button\",\n        action: \"webfb()\",\n        \"style\": {\n            \"layout_flexGrow\": 0,\n            \"layout_flexBasisPercent\": -1\n        }\n    },\n    {\n        name: \"🔺登　录🔺\",\n        type: \"button\",\n        action: \"weblogin()\",\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": -1\n        }\n    },\n    {\n        name: \"♤登出\",\n        type: \"button\",\n        action: \"re()\",\n        \"style\": {\n            \"layout_flexGrow\": 0,\n            \"layout_flexBasisPercent\": -1\n        }\n    },\n    {\n    \tname: \"💬信息\",\n    \ttype: \"button\",\n    \taction: \"sm()\",\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": -1,\n            \"layout_wrapBefore\": true\n        }\n    \t},\n    \t{\n        name: \"🧾延迟测试\",\n        type: \"button\",\n        action: \"ceshi()\",\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": -1\n        }\n    },\n    \t{\n        name: \"⏭️启用下载\",\n        type: \"button\",\n        action: \"downl()\",\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": -1\n        }\n    },\n    \t{\n        name: \"🌐打开本书↓\",\n        type: \"button\",\n        action: \"webb()\",\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": -1,\n            \"layout_wrapBefore\": true\n        }\n    },\n    \t{\n        name: \"❌屏蔽\",\n        type: \"button\",\n        action: \"hmd()\",\n        \"style\": {\n            \"layout_flexGrow\": 0,\n            \"layout_flexBasisPercent\": -1\n        }\n    },\n    \t{\n        name: \"🧹清理\",\n        type: \"button\",\n        action: \"hmdre()\",\n        \"style\": {\n            \"layout_flexGrow\": 0,\n            \"layout_flexBasisPercent\": -1\n        }\n    },\n    {\n        name: \"书名\",\n        type: \"text\"\n    },\n    \t{\n        name: \"🆕版本更新\",\n        type: \"button\",\n        action: \"gengxin()\",\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": -1\n        }\n    },\n    \t{\n        name: \"♻️同步书架\",\n        type: \"button\",\n        action: \"shujia()\",\n        \"style\": {\n            \"layout_flexGrow\": 0,\n            \"layout_flexBasisPercent\": -1\n        }\n    },\n    \t{\n        name: \"🌐书架\",\n        type: \"button\",\n        action: \"webbs(1)\",\n        \"style\": {\n            \"layout_flexGrow\": 0,\n            \"layout_flexBasisPercent\": -1\n        }\n    },\n    {\n        name: \"正则书名黑名单\",\n        type: \"text\"\n    },\n    {\n        name: \"正则书名白名单\",\n        type: \"text\"\n    },\n    \t{\n        name: \"🌐更新日志\",\n        type: \"button\",\n        action: \"gitee()\",\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": -1,\n            \"layout_wrapBefore\": true\n        }\n    },\n    \t{\n        name: \"🌐打开网站\",\n        type: \"button\",\n        action: \"webbs(2)\",\n        \"style\": {\n            \"layout_flexGrow\": 0,\n            \"layout_flexBasisPercent\": -1\n        }\n    },\n    \t{\n        name: \"🔁书名\",\n        type: \"button\",\n        action: \"shuming()\",\n        \"style\": {\n            \"layout_flexGrow\": 0,\n            \"layout_flexBasisPercent\": -1\n        }\n    },\n    \t{\n        name: \"🗻净化封面\",\n        type: \"button\",\n        action: \"jhfm()\",\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": -1\n        }\n    },\n    \t{\n        name: \"🌐书源介绍\",\n        type: \"button\",\n        action: \"let option={};option['headers'] = {'User-Agent': java.getWebViewUA()};java.startBrowser('https://luoyacheng.cloudns.ch/#八叉,'+JSON.stringify(option),'介绍');\",\n        \"style\": {\n            \"layout_flexGrow\": 0,\n            \"layout_flexBasisPercent\": -1\n        }\n    },\n    \t{\n        name: \"🤔反馈\",\n        type: \"button\",\n        action: \"let option={};option['headers'] = {'User-Agent': java.getWebViewUA()};java.startBrowser('https://github.com/Luoyacheng/yuedu/discussions/categories/a-八叉?discussions_q=,'+JSON.stringify(option),'8x反馈');\",\n        \"style\": {\n            \"layout_flexGrow\": 0,\n            \"layout_flexBasisPercent\": -1\n        }\n    },\n    {\n        name: \"封面背景颜色\",\n        type: \"text\"\n    },\n    {\n        name: \"封面字体颜色\",\n        type: \"text\"\n    },\n    \t{\n        name: \"⚒️调试模式\",\n        type: \"button\",\n        action: \"bfqfun2('调试模式')\",\n        \"style\": {\n            \"layout_flexGrow\": 0,\n            \"layout_flexBasisPercent\": -1\n        }\n    }\n]",
    "loginUrl": "function login(){}\nfunction weblogin(){\n\tif (String(source.getLoginHeader()).includes(\"jieqiUserInfo\")) {\n\t\t//网页登录，验证登出\n\t\tjava.longToast('请先在该界面登出账号');}\n\t\telse {\n\tlet nn=getsurl();\n\tlet option={}; option[\"headers\"]=gethd();\n\toption[\"headers\"][\"User-Agent\"]=java.getWebViewUA();\n\tsource.removeLoginHeader();\n\tlet url = nn.replace('www.','') + '/login.php';\tjava.startBrowserAwait(url+','+JSON.stringify(option), '八叉登录');\n\tPackages.java.lang.Thread.sleep(300);\n\tlet ck = cookie.getCookie(nn);\n\tlet i = String(ck).includes(\"jieqiUserInfo\");\n\tif (i) {source.putLoginHeader(ck);\n\tjava.toast(\"登录成功，VIP模式💎\");}\n\telse java.toast(\"网页登录失败，未获取到账号cookie\");}\n\t}\r\n\r\n\nfunction ceshi(){\n\t['　　　','·　　','··　','···'].forEach((_,i) => {java.longToast('\\n\\n测试中'+_+'\\n');Packages.java.lang.Thread.sleep((3-i)*70);}); //然并卵的动画(但是好看)\n\ttry {\n\tlet nn=getsurl();\n\tlet option={};\n\toption[\"headers\"]=gethd();\n\tconst startTime=new Date().getTime();\n\tlet web=java.connect(nn+','+JSON.stringify(option));\n\tconst endTime=new Date().getTime();\n\tlet webr=web.body();\n\tlet webc=web.code();\n\tif (webc==403) throw '访问被拒绝';\nelse if (webc==520) throw 'IP被拉黑';\nelse if (/^java\\.net|^error/.test(webr)||webr=='') throw '无法连接';\n\tlet speed = (endTime - startTime) / 1000;\n\tspeed = speed.toFixed(2);\n\tjava.toast('\\n\\n延迟：'+speed+'秒\\n');\n\t} catch(err) {java.longToast(err);}\r\n}\n\r\nfunction re(){\n\tjava.toast('稍等');\n\tlet nn=getsurl();\n\tlet url = nn.replace('www.','') + '/userdetail.php';\n\tlet ck = source.getLoginHeader()||'';\n\tcookie.setCookie(url,ck);\n\tlet option={}; option[\"headers\"]={};\n\toption[\"headers\"][\"User-Agent\"]=java.getWebViewUA();\tjava.startBrowserAwait(url+','+JSON.stringify(option), '八叉登录');\n\tPackages.java.lang.Thread.sleep(300);\n\tck = cookie.getCookie(nn);\n\tlet i = String(ck).includes(\"jieqiUserInfo\");\n\tif (!i) {\n\tcookie.removeCookie(nn);\n\tsource.removeLoginHeader();\n\tjava.toast(\"回到访客模式🔒\");}\n\telse java.longToast('\\n登出失败');\r\n}\n\r\nfunction sm(){\nlet banben =   String(source.exploreUrl).match(/let banben=\"([\\d\\.]+)\"/)[1];\nlet url=getsurl();\nlet cki = String(source.getLoginHeader()).includes(\"jieqiUserInfo\");\nlet ms= \"访客模式🔒\";\nif (cki != '') ms = \"VIP模式💎\";\r\nlet tt = `\n模式：${ms}\n版本：${banben}`;\n    java.longToast(tt);\r\n}\nfunction webck(){\n\tlet nn=getsurl();\n\tlet nnm=nn.replace('www.','');\n\tlet ck=source.getLoginHeader()||'';\n\tif (ck) {\n\tcache.put('8xbff',source.getLoginInfo());\n\tcache.put('8xbff2',ck);\n\tcookie.replaceCookie(nnm,ck);}\n\treturn nnm;\n\t}\nfunction webb(){\n\tlet id = cache.getFromMemory('8xid');\n  if (id) {\n  \tlet option={};\n  \toption[\"headers\"]={};\n  \toption[\"headers\"][\"User-Agent\"] = java.getWebViewUA();\n  \tid=Object.keys(id)[0];\n  \tlet nm=webck();\n   java.startBrowser(`${nm}/book/${id}.html`+','+JSON.stringify(option),'八叉');\n   } else {java.toast('\\n请在书籍界面点击或刷新书籍');}\n}\n\nfunction webbs(x){\n\tlet nm=webck();\n\tif (x==1) {nm+='/modules/article/bookcase.php';}\n\tlet option={};\n \toption[\"headers\"]={};\n \toption[\"headers\"][\"User-Agent\"] = java.getWebViewUA();\n\tlet wbr=java.startBrowserAwait(nm+','+JSON.stringify(option),'web',false);\n\tlet urlc=wbr.url();\n\tlet [,bkid]=urlc.match(/https.+\\/book\\/(\\d+).*\\.html/)||['',''];\n\tlet url = \"legado://import/addToBookshelf?src=\"+getsurl()+\"/book/\"+bkid+'.html,{\"origin\":\"https://八叉书库.luoyacheng.ip-ddns.com\"}';\tsource.putLoginHeader(cookie.getCookie(nm));\n\tif (bkid!='') java.openUrl(url);\n}\n\nfunction hmd(){\n\tlet id = cache.getFromMemory('8xid');\n\tif (id) {\n\tlet hmd = cache.get('8xhmd')||'{}';\n\thmd = JSON.parse(hmd);\n\tlet idd = Object.keys(id)[0];\n\tif (idd in hmd) {\n\t\tdelete hmd[idd];\n\t\tcache.put('8xhmd',JSON.stringify(hmd),0);\n\t\tjava.longToast('\\n已将书籍：'+Object.values(id)[0]+'\\n移除黑名单😅');\n\t\t}\telse {\n\thmd = Object.assign({},hmd,id);\n\tcache.put('8xhmd',JSON.stringify(hmd),0);\n\tjava.longToast('\\n已将书籍：'+Object.values(id)[0]+'\\n加入黑名单😤');}\n\t\n\t} else {java.toast('\\n请在书籍界面点击或刷新书籍');}\n\t\n}\n\nfunction hmdre(){\n\tlet hmd=cache.get('8xhmd')||'{}';\n\thmd=JSON.parse(hmd);\n\tlet ss=Object.entries(hmd);\nlet [cb,cf] = colorz();\nlet svg=`<svg width=\"990\" height=\"300\" xmlns=\"http://www.w3.org/2000/svg\">\n<style>\ntext {\n\twhite-space: pre;\n\tword-wrap: break-word;}\n</style>\n<rect width=\"100%\" height=\"150%\" fill=\"#${cb}\"/>\n<text fill=\"#${cf}\" text-anchor=\"middle\" dominant-baseline=\"middle\" stroke=\"#000000\" stroke-width=\"1\" font-weight=\"bold\">\n<tspan x=\"50%\" dy=\"30%\" font-size=\"100\">\n是否清空黑名单<tspan font-size=\"30\">（${ss.length}）</tspan>\n</tspan>\n<tspan x=\"42%\" dy=\"25%\" font-size=\"60\">输入“确认”进行清空</tspan>\n<tspan x=\"50%\" dy=\"20%\" font-size=\"50\">输入“名单”打印一份名单到日志</tspan>\n<tspan x=\"50%\" dy=\"20%\" font-size=\"50\">输入书籍ID单独移出黑名单<tspan font-size=\"30\">(名单查看)</tspan></tspan>\n</text>\n</svg>`;\nsvg=java.base64Encode(svg);\n\ntry {\n//拦截验证码报错\nlet ysr=java.getVerificationCode('data:image/svg+xml;base64,'+svg);\nPackages.java.lang.Thread.sleep(100);\nif (ysr=='确认') {\n\tcache.delete('8xhmd');\n\tjava.toast('\\n已清空');\n}\nelse if (ysr=='名单') {\n\tjava.log('\\n💔8x黑名单：\\n'+ss.join('\\n'));\n\tcache.put('8xbff',source.getLoginInfo());\n\tcache.put('8xbff2',source.getLoginHeader());\n}\nelse if (/\\d{3,}/.test(ysr)) {\n\tif (ysr in hmd) {\n\tjava.toast('\\n已将书籍：'+hmd[ysr]+'\\n移除黑名单');\n\tdelete hmd[ysr];\n\tcache.put('8xhmd',JSON.stringify(hmd),0);\n\t} else {java.toast('移出失败');}\n}\nelse if (ysr=='恢复') {\n\tlet ryr=cache.get('8xbff');\n\tlet ryr2=cache.get('8xbff2');\n\tsource.putLoginInfo(ryr);\n\tsource.putLoginHeader(ryr2);\n\tjava.toast('\\n已恢复账号信息');\n}\n\n} catch(err) {}\n}\n\nfunction downl() {\nlet dn = source.get('8xdn');\nif(dn!=1) {source.put('8xdn',1);java.toast('已支持下载');}\nelse {source.put('8xdn',0);java.toast('已优化加载');}\n\t}\nfunction shujia() {\nlet dn = source.get('8xsj');\nif(dn!=1) {source.put('8xsj',1);java.toast('🟢已启用同步网站书架');}\nelse {source.put('8xsj',0);java.toast('⚫已关闭同步网站书架');}\n\t}\nfunction shuming() {\nlet sm = source.get('8xsm');\nif(sm!=1) {source.put('8xsm',1);java.toast('🟢书名跟随更新');}\nelse {source.put('8xsm',0);java.toast('⚫书名保持初始');}\n\t}\nfunction jhfm() {\nlet jhf = source.get('8xjhf');\nif(jhf!=1) {source.put('8xjhf',1);java.toast('😈净化封面');}\nelse {source.put('8xjhf',0);java.toast('😍显示封面');}\n\t}\n\nfunction gitee() {\nlet option={};\noption[\"headers\"] = {\"User-Agent\": java.getWebViewUA()};\njava.startBrowser('https://gitee.com/lyc486/yuedu2/commits/main/书源/八叉/8x_b.json'+','+JSON.stringify(option),'日志');\n}\nfunction bfqfun2(x) {\nlet xx = source.get('bx'+x);\n//默认关闭\nif(xx!=1) {source.put('bx'+x,1);java.toast('🟢已开启 '+x);}\nelse {source.put('bx'+x,0);java.toast('⚫已关闭 '+x);}\n\t}",
    "respondTime": 180000,
    "ruleBookInfo": {
      "coverUrl": "#content img.0@src\n<js>\nlet jhf=source.get('8xjhf');\nresult=gethdi(result);\nif (jhf=='1') result=jinghuafm();\nresult\n</js>",
      "init": "<js>\n//重定向和导入书架处理\nlet i = String(book.bookUrl).includes('https:/');\nif (i) {\n\tbook.bookUrl = `data:;base64,${java.base64Encode(baseUrl.replace(/,{or.+/,''))},{\"type\":\"bax\"}`;\n\t//注意入库origin\n\t}\n\nlet nn=getsurl();\n\n//发书评功能\nlet bkbl = book.getVariable(\"custom\");\n//解书籍地址\nlet ml = String(book.bookUrl).replace(/.+,(.+),.+/,'$1');\nlet mlj = java.base64Decode(ml);\nlet [, bkid=''] = mlj.match(/book\\/(\\d+)/)||[];\n//↑获取书id\njava.put('bkid',bkid);\n\nif (bkbl=='🔒'||bkbl=='') {\n//带🔒或书籍变量为空会经过这里\n//处理加书架功能\nlet sj=java.get('sj');\nlet sj2=source.get('8xsj'); //启用同步的标识\nif (sj=='2'&&sj2=='1') {tbshujia(nn,bkid)&&java.put('sj',3);}\nelse if (sj=='1') {java.put('sj',2);}\n\n} else if (bkbl=='目录') {\n\t//清空最新章储存强制刷新目录\n\tjava.put('8xzx','');\n\t//清空输入的书籍变量\n\tbook.putCustomVariable('');\n} else {\nlet pfurl = nn+'/modules/article/rating.php';\nlet plurl = nn+'/modules/article/reviews.php';\nlet ck = source.getLoginHeader()||'';\nlet cki = ck.match(/UserToken%3D([^%]+)/)||['',''];\ntk = cki[1];\n//↑获取链接和tk\n\nif (bkid != '' && tk != '') {\nlet tm = new Date().getTime();\nlet bkfs = (bkbl.match(/^(\\d|10)分$/) || ['','0'])[1];\nlet pfbody = `score=${bkfs}&id=${bkid}&ajax_request=${tm}`;\nlet plbody = `ptitle=&act=newpost&jieqi_token=${tk}&Submit=&pcontent=${bkbl}&aid=${bkid}&ajax_request=${tm}`;\n\nlet headers = gethd();\nheaders['Referer']=mlj;\nheaders[\"Cookie\"]=ck;\nlet url='',body='';\nif (bkfs != 0) {url=pfurl;body=pfbody;}\nelse {url=plurl;body=plbody;}\n//清空输入的书籍变量\nbook.putCustomVariable('');\nlet by = java.connect(url+','+JSON.stringify(\n    \t{\"method\": \"POST\",\n    \t\"header\":headers,\n    \t\"body\":body})\n    \t).body();\njava.longToast(\"\\n\"+java.htmlFormat(by));\n//随机延时0-1秒\nlet tim = Math.floor(Math.random()*1001);\nPackages.java.lang.Thread.sleep(tim);\ncache.deleteMemory('baxxq'+bkid);\n\t} else if (tk == '') {java.toast('未登录');}\n}\n\n//先发评论再访问刷新\nif (!i) {\n\t//跳转时，src为源码\n\tlet tt = java.hexDecodeToString(src);\n\t//不要直接访问tt\n\ttt=String(tt).replace(/http.{4}[A-z\\d\\.]+/,'');\nlet option={};\noption[\"headers\"]=gethd();\n\tconst startTime=new Date().getTime();\n\tresult = cache.getFromMemory('baxxq'+bkid) || java.ajax(nn+tt+','+JSON.stringify(option))+'';\n\tconst endTime=new Date().getTime();\n\tlet speed = (endTime - startTime)/1000;\n\tif (speed>39) {java.toast('\\n详情页访问延迟过长：'+speed.toFixed()+'秒');}\t\n}\n\tjava.setContent(result);\n\n//内容判断\nlet name=java.getString('class.divbox cf@span.0@text||.mbs@ownText')+[];\nname=name.replace(/^《|》$/g,'');\nlet author=java.getString('class.divbox cf@span.1@a@text')+[];\nif (author=='')\n[,author]=(gets(\".gray@ownText\").match(/^(.+) 著/))||[];\nif (name) {\n\tcache.putMemory('baxxq'+bkid,result);\n\tbook.name=String(book.name)||name;\n\tbook.author=String(book.author)||author;\n//放入书名\nlet Info=source.getLoginInfoMap()||{};\nInfo['书名'] = book.name;\nsource.putLoginInfo(JSON.stringify(Info));\n//放入ID和书名。正式版该语法会报错\ncache.putMemory('8xid',{[bkid]: book.name});\n\n\tif (book.name!=name) {\n\t\t\tlet sm=source.get('8xsm'),sm1=java.get('sm1');\n\t\t\t//sm功能标记，sm1判断标记\n\t\t\tif (sm1=='') {\n\t\t\t//书名不同，仅记录\n\t\t\tjava.put('sm1',1);\n\t\t\t} else if (sm=='1') {\n\t\t\t\tbook.name=name;\n\t\t\t\tjava.toast(\"已自动更新书名\");\n\t\t\t} else if (sm1=='1') {\n\t\t\t\tjava.longToast(\"详情页获取的书名：\\n《\"+name+\"》\");\n\t\t\t\tjava.log(\"书名：\"+name);\n\t\t\t\tjava.put('sm1',2);\n\t\t\t}\n\t\t\t\n}\telse if (book.author!=author) {\n\t// book.author=author;\n\t//仅输出日志\njava.log(\"获取的作者不同，作者：\"+author);}\n\t\n\t//书名和作者正常由此过\n\t}\nelse {\n\t//书名加载失败\n\tgengxin();\n\tjava.toast(\"详情页加载失败，请刷新重试\");\n}\n\tresult\n</js>",
      "intro": "{{\n//书名过长时在简介显示\nlet length = 0;\nlet fuhao = ',.?!:;()[]\"';\nlet tt='&#10;';\nfor (char of String(book.name)) {\n\tif (fuhao.includes(char) ) length += 0.5;\n\telse length += 1;\n\t}\n//大于18个全角字符\nif (length > 18) tt+='📙书名：'+book.name;\n\nlet zx = java.get('8xzxt');\n\nlet rr=[];\nif (/http.{4}www/.test(getsurl())) {\nlet temp=java.getStringList('class.tabcontent@class.tabvalue.1@td[0:3,9,10]@text');\nrr=Object.values(temp);\n//处理rr\n[rr[0], rr[2]] = [rr[2], rr[0]];\nrr[0] = '🕰️最新：' + String(zx).replace(/^正文|^\\s+/,'') + String(rr[0]).replace('最后更新：',' ').replaceAll('-','/') + String(rr[1]).replace(/连载状态：(.+)/,' ($1)');\ndelete rr[1];\nrr[2] = String(rr[2]).replace(/作品分类：\\s*/,'🗂️分类：') + String(rr[3]).replace(/作品性质：(.+)/,' ($1)');\ndelete rr[3];\nrr[4] = String(rr[4]).replace(/总点击数：\\s*/,'🎯点击：') + String(rr[5]).replace(/本月点击：(.+)/,'　$1 (月)');\ndelete rr[5];\n} else {rr[0]='🕰️最新：' + String(zx).replace(/^正文|^\\s+/,'')+'\\n'+'🎯点击：'+(gets(\".gray@ownText\").match(/著 (\\d+)\\s*\\|/)||['',''])[1];}\n\n//评分\nlet pf=java.getString('.ratediv@text');\nlet r0 ='\\n' + rr.join('\\n') + '\\n' + String(pf).replace(/评分：\\s*/,'💡评分：');\n//简介\nlet r1=java.getString('.tabcontent .tabvalue:eq(0) div@html||#introa@textNodes');\nif (r1==\"\") {r1='';}\nelse {\n r1 = '\\n🗨️简介：\\n' + String(r1).replace(/[\\u3000\\u2003]{2}/g,'\\n').replace('「','“').replace('」','”').replace(/\\>\\s*内容简介/,'')\n\t}\n//评论\nlet r2=String(java.getString('#content>.c_row@html||.moretop+.ullist>li@html'));\nlet xi = book.getVariable(\"custom\")==\"🔒\";\nif (r2==''||xi) {r2='';}\nelse {\n\tif (/http.{4}www/.test(getsurl()))\n\tr2 = \"\\u200b\\n📝评论：\"+r2\n\t.replace(/<div class=\"c_subject\"[\\S\\s]+?div>|<span class=\"fr\"[\\S\\s]+?span>|点击：.+(?=回复)/g,' ')\n\t.replace(/回复：.+c_value\">0/g,'')\n\t.replace(/<p[>\\ ].+<\\/p>/g,'\\u200b');\n\telse r2 = \"\\u200b\\n📝评论：\"+r2\n\t.replace(/<li><a/g,'<li><p>\\u200b</p><a')\n\t.replace(/<\\/em><b>/g,'</em>　👨<b>');\n\t}\n\ttt+r0 + r1 + r2\n}}",
      "kind": "b:contains(标签：)~a@text\n<js>\nString(result).slice(1, -1).replace(/[\\#\\,]/g,'').split(' ');\n</js>",
      "lastChapter": "<js>\nlet zxe=gete(\".divbox h3 a||span:contains(最新：)+a\");\nlet zxh=zxe.attr(\"href\").replaceAll(\"http.{4}[^\\\\/]+\",'');\nlet zx = java.get('8xzx');\nif (zx==zxh) java.put('ww',0);\nelse {java.put('8xzx',zxh);java.put('ww',1);}\njava.put(\"8xzxt\",zxe.text())\n</js>",
      "tocUrl": "li:matches(^点击阅读$|^目录$) a@href\n<js>\njava.put(\"page\",0);\nif(result.length>3)\n`data:;base64,${java.base64Encode(result)},{\"type\":\"ml\"}`;\nelse {\nlet ml = String(book.bookUrl).replace(/.+,(.+),.+/,'$1');\nlet mlj = java.base64Decode(ml);\n`data:;base64,${java.base64Encode(mlj.replace('.html','_1.html'))},{\"type\":\"ml\"}`;}\n</js>",
      "wordCount": "<js>\nlet r1=`{{@@.tabcontent .tabvalue.1@html##全文字数：(\\d+)##$1###}}`;\nlet r2=`{{@@.gray@ownText##(\\d{2,})字##$1###}}`;\nr1||r2\n</js>"
    },
    "ruleContent": {
      "content": "@js:\nᝰ꧁\u0016øa½\u00153/`(P[BT\u001eGvaï\"ä8q\rò¸yÕ¤23Öºã»>&¥DfÒ]9?ò2Y%õ.Ñ\u001bMø\u001b¤á5Sµþ\u0012=¥\u001d\u000fë\u0005BÛ÷Å_\n6nÊâR°³¨¨þ;~\u0003VÊÇPkÐÕ¸\u0019àAºïÝh\\\u0003´,á0>ø\u001e\u001aè\u0000KFÏ\rØ³0\u0013 eCÄK¡Ó·\n±ìE8nD0skUììB\u001fÏG¸ÔòG¬)+\u0013å`TNTsÙ´\u0001q×f\u0017r3ó÷.*OÙóKë`Z&^Od@\u0010ý×óá4CÝ¶Ñ+ðÍDi\u0011\u0004°¥\u0003¢«R\u0005ªUD]\u001a^:5.qyÅþ{UhÔj¬6{5ÓÂÔà\t*_t4:\u0013ù_á7®#[VpÈ\u0007\u0005\u0013¥ëTÉÃûÅ+ßSs\u0003áT³aG¶5Ø\n;Ò¤_b\u0012gð\"ÛÃö´¨e²\u0001ðÇî\u0005v\u0019gôD~I¸Ñ6,^N&jÇÁK\u0002%¹Çów¶0Lºê-ïö\u0003ä\u0002@4\f'¯Ý\u0005¨àuº\u0017­¨1{qtµ¸¨Ð\r÷X8>\u0007(XmWý'¬ö~¬ù(¶ù\"~}¾;+¨3F2øcP×³CñØ\f:\u0005\u000fiqYùNbV\u0001uÞ©\u0010S\u0004GACt\u001bñBù÷\u0019x\b\u0015ê6VÔÅù\u000eÄ*9tÈ7«}>ß »hjì\u001ed¦\u0002\u0018Z\u0013±dÌÁ\u0012»ï\u001c\u0015ÿ\u0000Ñ+ÝLûñ¡\t²É~\u0016e\u0011×2uÔ§/°~>ìqü=F\u001d @\"üõw\u001c[\u0012Üh-?Oz].P¾amº»övÇUBMX0ú<éÖÿÓ?¹¸\u000f(á=´o6·\u0002ËmÐ]ñ.\u0018áÓñ÷*½\u000b<»é°Mã'Ö\u00147Ðã®¥\u0014oDWêë-8Nx;N}¥\u0013\f2<©\u001dÐì¶Ê³\u0016¥tñÊe¢w|Óµ£*ÆëlÎËExO\n@\"F})áíD\u0012\u001az\u0014­\u0007m1ªí\u0004~#êÉwFt+|- _~\u00052ñÐ@wñZå\rk9Ý\u001df0LÅx¥kc\u0017Æ\u000f>ðMÖP\u0003,_Ø}4¦ÓA±ª\u00130û{|Å¡_É\u0015\u0000°Ä`>â¶@Ü6+Ê '?u3}Á3.`]=\u001aN¶·k¦q6£å\rðy\u0010q½¨{[u½Ã\u001fæ]ÖùÛ¡ÈvYË§¬_Ï?ß¼AéFk<E¢h}ã1æ\u0000ìóÕnæ¢5/ý$D±ø>3\u001fyãg¢ åà\n(´Wë»¢d\u001a¾UÕ\u001cSucmÉ¤ä\b¤Öº¨Sp\u001c¢v\u000efùÝÝMûÝ\u0017ö¸Ë|wºAâbÏ·}n6X$g?¢\u0017T·\u001aÚò¹\u000f¹Ød/:»ô\u0005[>QÁg­ø\fÏ&åzØ\u00061\u001b¿\u001fÉ\u0011T\u0000ÿZj0\u0006á©ðõa«Ù¶?A£\u0017\u000e@Ä °;èðÔ\u001cb;N|n9uÔ¬\u000e&î\u001e\u001b·\u0010¨¢¢òîÚZÏpG\u0013iPtí\u0007D*Íã.ù\u0012ÀK\u001d÷\u001dºËLÒ{íÆ\u001b«oèn±_À\u000bútË\u001c\u0018í\u0001ùÄØãÝ\u000eXô6qKk«ï.\u0018Üã\u001bX\u0003n]\u0000\u001a52ª\u0003\\½ØÊ3¦c®tJº\u0005\u001eÈß<\u0014\u0014\t÷µW\u001e÷\u001aúô æ qÔµ4V\u0001©Ôn9\u001cæõ\u001fSfô0\u001b\u000bøOr`3ý Ç2V ÌRmãÏ¹¸\"IÆizÈ<bçü¸\u001a£0ÔS{SÃm<ÞGÞÖÞ3rqºS¸¦lpûqEÉßGa`09{\u0017LC\u000b\u0013\u000b\fMÅ2Å>\u0015Kh>¯­Ù9NÇõVÈ7|K²/TÜÉCµ,ðëþÐ<oßj.Ø+}_RÀÛÓé®\u0018\u001aÀ\u0014s\u001a¤ç\u000e\u0001HjE,Ð}H{µ]L«×\u001aµþÊy®Ú\u0014\u0017¡`\tAÿÇ:xÅp&hx:É\u0012är\fñ\u0003Ð|@ÓìµfëÈ÷h9c[02\u000f½%y¯r§l\u0001Å\u0000tb*clD¦Ô'ÿÓ)¼Ô\u0017gc(wÒrÕW\u0018\u0004àáó\u0016\u000e\u0015ýÌÃ\u001b\u0010|Dv8DBKñÊZ¢ µ±¦If\u0016±§\u0019Ê¯\u001aq~qü[×^¢+h¾òÚá-sQc­\u000f#dZ\u0000js:âvl;\u001f:´Åø\u0001áHä\u0011Ï=z@4ìÿa\u001b\u0011þ¾Zª=\u0000ÀÈÐr&wï`à[}ð\u0017M%UÅ\u0002£R\u0001üJÍá\u001bÚÖ`æ¶<Ñ¢uÊp¸Hîô¸Ç°2ñ¬H\u001cÅ¥f²ÚØí)ÇÀ!\u0005Jô8?ã­f1f­O\u000f\u001dz#¸9g\u0006n±×´ß7\u0019ó\fD­ÕÃ\u001aðM[C\"ìø ô\u000e¹\rdn?ÏØ>Aª8*ä\u0013üÁ¿ÜòKHùáC\u001c\u0005XjPd\u0014[&ø ¡ûa>~\u0003N\tßÓ\u0014YÒü'Èý¼Ú\u0016¤ûáUGD@2Nw[¦YÕ-Õå­u¹d\nô!ÒÄVeXÁMLÐÔ½\u001c>`?¡ðß<Dãèö~¯!I(òú²*oáØ=\u001eÑ\u0014¿fÝaæ¼ÜT\b\rþÄ_[Ê\fé\nä¯&Ç#¬{v«\u0017ÉeÀùéE­Û-D×>j»2áõD''}r>\u0002aù\u0013>63\u0004p\u0015æø\u001f\u0012~Më1;EO¡Z¶å ìÿ²\u0003èm]PÙÃ#`\u000f\u0018C½êG6¬¨§ôÑgXæ<ØÍ\bù\t±,Mm4ôýCxÙ\"®ý`:ö\\\b{zëS×ü\u0006ê³rk¢ÎÂÙ\u0001.Ø°ãOe¶ÝTAZ<¿`a\u0016Îú\u0000Ö\u001f\u0011úíÏ]¾Pzª\\\fSâ\u0014Òu\u001a\u000ef\u0007xë\u0007B\bGÃâì0Ú\u0012J6Mø\u0014epD?ülhþ5\"\u0016Û~\u0003\u0001\u0014Û+d/9f©kýlP\u001eú1\u0018jn-\u0010î7_ýT´¹Ú\u0011º\u001dâUE¦º®Ô÷'ïw3i7õÑ\u0003Ú»gøØ\u0019y¢ªÈU\tS\u0018\nt«B\fó>;`\u00143'r\\2\féÏv%¾¥\rö\u001cÏÉtÐWi·qÎGµVµ\u0004nÿ8°jøc{qøª\u0015j \u001f/?h¬ñÂÏ÷\u0004âø*\u0016æ\u001c¾÷VkÀó U\u0005\u001aÔY[-£«þêA°6wvëEÎD¸è{\u0018L\u0004\u0001Æ\u001e\u0018¢1¶ ó\u001c°û]T,ì\u0013t!Éa ²Ó\u0014![K5Æ\u000bÁ$è\u0014J«$Ú·CßaÉ\u0003où¬\u0000ûo UÄpW37\u000b\b\u0014;T­ÐiÑÀe9¶b¾Ê~\u00029Û\u0006ÃøíÐh:>7!+ä9ÌÎø2bó\u0001¬Ð~\u0018uþû<2®=}-ÉýåAå¢åÜØ:µæ§²?öÓ[u·çÇÅõâò_äÍþ·S¹ðæå\u0001J`o³±|þ7§\u0012CW­.\u0013\u001cáeÖ÷y^Úê%+\u001c¸\u0003ü¢.,aWUCÎ<lÏj%ËâNþ×åG\u0018÷$T>E~\u0017\"*T*~xJÚn\bÿø:\u001dD<Uþ¢\u0001WzLk\u001aÉ¹\u0017Ý3B$wiç÷\u0017DÅEà´ò¦ú\b\\+¤á&c@@\\cÉØº¬ùvQÈ ðúHq\u0004ÞbÀ1VÒõguÏú\u0014±¬}Qký\u0004;Ì\u0000~f+¦e\u001f«j5\u0017_ØÑñß¥ààw4\tÏ\u000e\u001a\u0013rB_/BQ»§åj\u0012g\u000bDøHqvZVÃ\u0015\u0014î/¶>l.@¾\u001b%;\u0004\u0014ïdýxÉÞe\u000eùuËÎ;Up^¼ºx\u001d\u0007Ë]Üãq=}¬¦\u0002Uð)b-Cf\u0018±{çP\tÆµÇûm\tÀ æ#_\f\b;;7²Ô]5¸³1j\u0014!ýêÉ$èö¢´\u0001±\u0017KVärÈ¹ ¿îóuï\u0010,«FvÞè\r¬\u001c¢C^I9+òûoIpÁ8}XÔnÉxy¼©©õ9àUÐ­ã\u001eo l2¢¹ç\\¹.WÂXç~\u0015Ó»ë~W'=§)6¢Ô5Î~Æ\b\u0014r±ß_ÐÃó4.ê\u0019éü6ÚÀc1+T\"$ÌÄEBIÎ'R½\u0014+9àÙò¦\u001fÃcfaÎ(¢2açTiZí\\ã-}s?òK\u0002ý\u000eU(ËÌs&Ôf­0·\u000eYJK6:xuë4]¬\u000eÓîÔÒñÛï\u00036\u0019\u0012\u001d-Ì!®\u000e-¶\u0018.ü\rHÝ$ïdN@Aþ÷êrñÎ\u001aÒ·DÛ=^H\u0011þ[/`~=²}³bu'\u0005ãõ-çvû?\u0019¦ÉSÓí\u0001\\t\u0019Øv!¦cªê¿ ÆÁB&óªou^E?\u000fhn\u0014\u001aÃ2K®¿ù\u001f÷Î´L8\u0007SH±0¤x\u000e\u0003Á\u00028sýÝ¼®EUBÙc3¬N3]ödGÿ%$ð[b3\u0014üZuúµHÌàg:TTè+¹+ßHíx\u0015Xôm¤ÈF<bPxA\u0012ì¬ý­¢äéè¶g\ncC¶\u0007&dv\"J¸\r\u0010à,\\\u0001b8T«ÌdÉy \u0013Qó®ö¸Ç\u0003ð\u000fT¥@WrÛ-FÖ\bqZ6¥\u0015´vaü\u001c )\u000b®D~Ef:\tB\b\b\u0011[S\u001c&t¦lóðåÿhÝ\u0002oíùºZ§ìÁ¾\u001auÀq:¶ÙÿøY2´Y®Å5sÌ4\f*FOÖ¾HUÎû-s&¶ç±ÝZõVáªè¦NS¸/n9\u0018Û±tAòÍ ÏÑ­¸çñ¥T\u0004>3wõµfÌ/_,\u0007Ós\u0005«&¾úð3D@RÇ©G]\u0005k?Qù¥ËÅ45\u001faÑÌ æ«P\u0011ßÁ(ËcÞß7ª`_67#ÝJZ\u000e{\frþiÅa\u0019\u0017m!\u0015à#Ë±bE-¹*÷×ÚÝSÀ1më(× 5)¢,ê$£pQÔ³\u0017^²)QK\u0012\u0004fÌ»åû$\u000eø\rã\u0019ZhG\u0005aâÈ!¯Å¹óâã ÇÅþR4ùQ¡,z&º¯:uLWéºPS\u0002ì@\u001fß\u001bÅ\u0011Â{%\u001dÿýÀP1\u0018¾ï¾Ë\u001dÐ:û[¸Ìq´NÊ\n';Z\u0013\u0019?Mº¸Î[[]{=36Å(íÀp±\u001e\u001d,Ì2b\bØ\u0000ñ,×\fÚ7ÖÜN¡ÊF`7iRBÍ.\u001aoG¢³¸àxZ©Jùt\u0010Îüî[ÛE\u001bxy\t¾\u0010p\u0018Écy237râ¥¸²w\u001e\u0002¼¸cª~mÖë¯ `LRRZi<5\u0007b&¥è?ñ\u001b\u0005@ûIqX©\u0016Ç¢K~ÖÂUÖ\u0019þ×¿%\\J\u0006Æòj\u0005\u000f\u0003AÛé$jF¤\u0015ÄÔ³Ó#ÐN}%ÛbfÃzëL²zP}E¶vÂÙ3*Mî-<åÅÕ~\u0017\u0007c\u001fã¾5$\u000eëÇ7L\n­sï<b4ÝoÐ^ó)ÙèW¸OÏ®ãÈ,©d@FA\u0011V2b\u0011\u0019\u000f®Åg½¬g`\u0012Ç\f¡k>¸ÇncÓäpC½¥\nK.dX¥Y\u000ei\trS$hÚOÞ\u001f*ÊéV@·½$u\"E·\u0014\u0017ü>ßBT@6½6­\u001cÛ`){oç¬-¨Ð<\u0017'Ð)â¯\u001a2(tr£§Ä¬é\u0018\fC±ªRwÛ¤w\u000b2ùiÞ³\u00062}ç*È*Ò¸rhu\u0007A\u0010~Âî²BWWCF0mgNy4꧂꧂",
      "replaceRegex": "##(?:\\s|^)本站发布页.{0,9}8xsk.org|8xsk.org(?=\\s|$)|八叉书库|八叉~书库|八叉书[,~]库|(?:833330|8xsk|八叉)([^\\.])(?:xyz|yxz|org|书库)|八~叉|书~库##$1"
    },
    "ruleExplore": {
      "author": "<js>\nif (baseUrl.includes('search.php?'))\nresult=java.getString(source.ruleSearch.author+[])+'';\nelse if (/http.{4}www/.test(this.getsurl()))\nresult = gets(\"td.2@text||span:contains(作者：)+span@text\");\nelse\nresult = gets('td.1@a.-1@span@ownText').replace(/^\\//,'')||gets(\".gray@textNodes\").replace(/.+\\ \\|\\ |\\n.*/g,'');\n\nif (result == '[email protected]') {\n\tlet hex = java.getString('.__cf_email__.0@data-cfemail')+'';\n\tresult = decodeEmail(hex,0);\n\t}\nelse if (baseUrl.includes('/bookcase.php') ) {\n\tjava.put('sj',3); //标识已经同步了书架，作者名称读取缓存\n\tlet sj=source.get('sj'+java.get('bkid'));\n\tresult=sj.split(',')[0]||'';\n\t}\n\tresult\n</js>",
      "bookList": "<js>\nif (baseUrl.startsWith('http://localhost') ) {\n\t\tresult = [];\n}\nelse if (baseUrl.includes('search.php?') ) {\nlet r1 = java.getString('#content .blockcontent@text');\nif (r1.includes(\"错误原因\")) {java.longToast(r1);result = [];}\nelse {result = java.getElement('#jieqi_page_contents>div');}\n\t}\nelse if (baseUrl.includes('/book/') ){\njava.toast('暂不支持重定向结果');\nresult=[];\n\t}\nelse if (baseUrl.includes('/bookcase.php') ) {\n\t//我的书架\n\t\tlet ts= java.getString('table@caption@ownText||#jieqi_page_contents@ownText');\n\tts=String(ts).replace(/.*(可收藏 .+已收藏[^，。]+).*$/,'\\n$1');\n\tsource.get('sjts')!=ts&&ts&&java.toast('\\n'+ts);\n\tsource.put('sjts',ts);\n\tPackages.java.lang.Thread.sleep(100);\n\tif (/http.{4}www/.test(this.getsurl()))\n\tresult = java.getElement('table tr:has(a)');\n\telse result = java.getElements('#content div[class=\"c_row cf\"]');\n\t}\nelse {\nresult = java.getElements('#jieqi_page_contents>tr||#content div[class=\"c_row cf\"]');\n}\nresult\n</js>",
      "bookUrl": "@js:book.bookUrl",
      "coverUrl": "<js>\nlet jhf=source.get('8xjhf'), img;\nif (jhf=='1') img=jinghuafm();\nelse {\n//正常封面\nif (/articlelist|sort\\//.test(baseUrl)) {\n\t//含有封面，注意“sort”\n\timg = java.getString('img@src');\n\t}\nelse if (baseUrl.includes('search.php?') ) {\n\t//搜索\n\timg = java.getString(String(source.ruleSearch.coverUrl));\n\t}\nelse{\n\t//拼接封面\n\tlet id = java.get('bkid')+'', n;\n  if (id < 1000) n = 0;\n  else n = id.slice(0,-3);\nimg = `https://image.8xsk.org/${n}/${id}/${id}s.jpg`;\n}\nimg=gethdi(img);\n}\nimg\n</js>",
      "intro": "<js>\nif (baseUrl.includes('search.php?'))\nresult=java.getString(source.ruleSearch.intro+[])+'';\nelse if (/http.{4}www/.test(this.getsurl()))\nresult = gets('td.3@text||.c_description@text');\nelse\nresult = gets('td.2@text')||gets(\".gray@textNodes\").match(/\\n(.+)/)[1];\nif (baseUrl.includes(\"top/words\")) {'⠀\\n字数：'+(result/10000).toFixed(2)+'万'}\nelse if (baseUrl.includes(\"top/goodnum\")) {'⠀\\n收藏数：'+result}\n//新书榜\nelse if (baseUrl.includes(\"top/newhot\")) {\n\tresult = result>9999 ? \t(result/10000).toFixed(2)+'万' : result;\n\t'⠀\\n点击数：'+result}\nelse if (baseUrl.includes(\"top/signtime\")) {\n  let t = parseInt(result)*1000;\n  let time = java.timeFormatUTC(t,\"⠀\\n签约时间：yy/MM/dd HH:mm:ss\",8*60*60*1000);\n  time}\nelse if (baseUrl.includes(\"top/lastupdate\")) {'⠀\\n字数：'+(result/10000).toFixed(2)+'万'}\nelse if (baseUrl.includes(\"top/postdate\")) {'⠀\\n入库时间：'+result}\nelse if (baseUrl.includes(\"top/allvisit\")) {\n\tresult = result>999 ? \t(result/10000).toFixed(2)+'万' : result;\n\t'⠀\\n总点击：'+result}\nelse if (baseUrl.includes(\"top/monthvisit\")) {\n\tresult = result>999 ? \t(result/10000).toFixed(2)+'万' : result;\n\t'⠀\\n月点击：'+result}\nelse if (baseUrl.includes(\"top/weekvisit\")) {\n\tresult = result>9999 ? \t(result/10000).toFixed(2)+'万' : result;\n\t'⠀\\n周点击：'+result}\nelse if (baseUrl.includes(\"top/allvote\")) {'⠀\\n总推荐：'+result}\nelse if (baseUrl.includes(\"top/monthvote\")) {'⠀\\n月推荐：'+result}\nelse if (baseUrl.includes(\"top/weekvote\")) {'⠀\\n周推荐：'+result}\nelse if (/articlelist|sort\\/|search\\.php/.test(baseUrl)) {\n//含简介(搜索会经此)\nresult.replace('「','“').replace('」','”').replace(/\\s+/g,' ')}\nelse if (baseUrl.includes('/bookcase.php') ) {\n\tlet sj=source.get('sj'+java.get('bkid'));\n\tsj=sj.split(',')[1]||'';\n\t(sj==''||sj=='null')?'':'\\u200b\\n当前阅读进度：'+sj;\n\t}\nelse {''}\n</js>",
      "kind": "<js>\nif (baseUrl.includes('search.php?') ) {java.getStringList(String(source.ruleSearch.kind));}\nelse if (baseUrl.includes('/bookcase.php') ) {\n\tjava.getStringList('td.4@text');}\nelse {java.getStringList('td[4,5]@text||span:contains(更新：)+span@text');}\n</js>",
      "lastChapter": "<js>\nif (baseUrl.includes('search.php?') ) {\tjava.getString(String(source.ruleSearch.lastChapter));}\nelse if (baseUrl.includes('/bookcase.php') ) {\ngets('td.2@a.-1@text||h4+.gray:containsOwn(最新：)>a@text');}\nelse if (/http.{4}www/.test(this.getsurl())){\ngets('td.1@a.-1@text||class.c_subject@a.-1@text');}\nelse {}\n</js>",
      "name": "<js>\nlet rs='';\nif (baseUrl.includes('search.php?') ) {\nresult=String(java.getString('.c_subject@text||h4@text')).replace(/\\\"/g,'');\n//获取id目的\nrs = java.getString('a.0@href');\n}\nelse if (baseUrl.includes('/bookcase.php') ) {\n\tresult =  java.getString('td.1@a.-1@text||h4@a@text');\n\trs = java.getString('td.1@a.-1@href||h4@a@href');\n\t//我的书架需要转化链接\n\trs=getsurl()+'/book/'+rs.match(/aid=(\\d+)/)[1]+'.html';\n}\nelse {\n\t\tresult =  gets('td.0@a.-1@text||class.c_subject@a.1@text||h4@text')||gets('td.1@a.-1@ownText');\n\trs = java.getString('td.0@a.-1@href||class.c_subject@a.1@href||class.db cf@href||td.1@a.-1@href');\n}\n\n//获取id，黑名单时书名为空\nlet id = (rs.match(/book\\/(\\d+)/)||['',''])[1];\njava.put('bkid',id);\nlet i = hmdjib(id,result);\nif (i) result='';\nelse book.bookUrl=`data:;base64,${java.base64Encode(rs)},{\"type\":\"\"}`;\nresult\n</js>",
      "wordCount": "<js>\nif (/articlelist|sort\\//.test(baseUrl)) {\n  java.getString('span:contains(字数：)+span@text');\n}\nelse if (/articlefilter/.test(baseUrl)) {\n\tif (/http.{4}www/.test(this.getsurl()))\n\tjava.getString('td.3@text');\n\telse java.getString('td.2@text');\n}\nelse if (baseUrl.includes('search.php?') ) {\tjava.getString(String(source.ruleSearch.wordCount));\n\t}\n</js>"
    },
    "ruleSearch": {
      "author": "<js>\ngets(\"span:contains(作者：)+span@text\")||gets(\".gray@text\").match(/(^.+)\\ \\|/)[1];\n</js>",
      "bookList": "<js>\nlet r1 = java.getString('#content .blockcontent@text');\nif (r1.includes(\"错误原因\")) {java.longToast(r1);result=[];}\nelse {\n\tresult = java.getElement('#jieqi_page_contents>div');\n}\nresult\n</js>",
      "bookUrl": "@js:book.bookUrl",
      "coverUrl": "img.0@src\n<js>\nlet jhf=source.get('8xjhf');\nresult=gethdi(result);\nif (jhf=='1') result=jinghuafm();\nresult\n</js>",
      "intro": "<js>\nresult=gets(\".c_description@text\");\nif (result=='')\ngets(\".gray@textNodes\").match(/\\n.+/)[0];\nelse\nresult.replace('「','“').replace('」','”').replace(/\\s/g,' ')\n</js>",
      "kind": "span:contains(更新：)+span@text&&span:contains(关键字：)+span@text\n<js>\nif (result=='[]')\nresult=gets(\".gray@textNodes\").replace(/^.+\\ \\|\\ ?|\\n.*/g,'');\nString(result).replace(/[\\[\\]\\#\\,]/g,'').split(' ');\n</js>",
      "lastChapter": "span:contains(最新章节：)+span@text",
      "name": ".c_subject@text||h4@text\n<js>\nlet rs=java.getString('a.0@href');\n//获取id，黑名单时书名为空\nlet id = (rs.match(/book\\/(\\d+)/)||['',''])[1];\nlet i = hmdjib(id,result);\nif (i) result='';\nelse book.bookUrl=`data:;base64,${java.base64Encode(rs)},{\"type\":\"\"}`;\nresult\n</js>",
      "wordCount": "span:contains(字数：)+span@text"
    },
    "ruleToc": {
      "chapterList": "@js:\nᝰ꧁JO¶\f¬DÛýìGÜ\u001cJ¹\u001a«þýpù«î(¡&Æ!pþã£\u001f«SÍU\u001a¤[¼[uòw\u0004aÌà¤6Ï)\u001cL÷\t½âRN\u0006ÿ#\"R÷í3ÕÇ©Ø¤\u001cö<ïÃÖSÉò{Ã6{í&µ·Áilt2ÿ¼7GÌq!\u0005C\u0005Y:¿\u0010¾pÚ¶Ò=@ÙÕwxöÁ¯ ÿX\fGöÞô~FPw\u001a\u001bZ^ºçÏ¦DúB\\ÿ)A\u000bV²@ßã\u001a7Ì\u0004uéµ»]E)\u0018Ö%©N¦bÆ$á_þ\u000e4×ÐfÚ¶ó#ùguÒ\u0000Ë\u001dZ\n\t\u0005\u001a\u0012e=\u000e\u0004º¥z¯p`7\u001c,µÉÈÊæN\u0017ëøgx\u000fò æÔÔ9Á\u0004k+IQ}ÓQ\u0011&1$9À¼¬ûë>y%B«(ÌcËfR\b\"\u0007ZZâ\u0019~\rþkæ§3©ª\u0016(3+Î·~¼|²\u0016\u001b,³\u0018\u0007îÀM=¡Þ%¨)^\u000bÔ\tRü+M\u0010S]ÈxtV¨R0iËÜ®\u0011Ãðwç÷`ùÓRÌ\u0017®Þn=Rj+ô¾ÜÞþ¦N\u0015©Lá½CTÉ»\u0016æ-»èF\u0006Þª`\u001aä°¼¡\u0017\u0007\tÇ\u001bÅª\u001fÕ_ÀÐ\u0000\u0016á0é£n_õbÌþ5/·/öÖ×ÁU\u001e·õ­ªä¬ÿ\\i\u001c¨lU'g»ÖþiÆuN]1Ü^/QÖ]07\ttÃ²\u001a4D·qþja#ÍõZ8\bú,¢Ê\n½/U#\u000f×.uë¥\u000bKÂË\bðAY{\r\u0015|®jÊ_\u0019&i&\u0014Dñk­CÍ3a\u0013µÕ²U® *tJ\\\u000eoD\u0011ÈÝð]\bT_ÃZ{6S\"ÛUÁâIf\u000eÞwõÓD\u001dd\u0007µ·@ñ¦?X´ÑpÑ\u0007\u000eÔ\u0013Û5é\u0003®à¨>×u\u0010w\u0018ØÒu\bXU½ãÒµra\u0015ý,c\b\u001a¾jÛ\u000462Uu\u0014&H6yµÆs\"Õ&ÔÐNÚ\u0017¬\"74ÞÑ÷ì¢\u0005X\u001dÂ\u001dx~ÒÜ}!¸X½ÏÓÏ±ÁÃàÉÀy©Èª{|²Á©§»s\f¹(QÑ\u0018d\u001aa1\u000f\u0001ÒÉIß},R°J÷Õ!®N¼úÌg´6°¤»ëµ×:\rH\u0019üÔ¯oÉ{á\u00050Ê³\u000ftG}T­ôÚ4t1-á\"\u0007Óuî$m[ÔçÅY'¤¿û¶õsq2^ô<5y¼\u000eiVäÝe\\\u0010BT>®\rA­ìÏøÄkÏë@å>nô\u0003\u000bV±pgáÖDú¼\u0015Ë·LmDYâü\u001a¡,|\rÚÀ\u0002ñìâ1J<\u0017T£\u0010\u0007 öIha~H¢a_øûðÈ\u0007\u000e7Ù0Õª7Æ(\fx¢{°¢\u001a(#®:H\u0018æQ§4Uü³ê¸Cû¢ßÛrpüm\u0017ê·*K\u0000ìî&Z\u00017p=ôÂ\u000fH$\u001cd\u000bt\u000buäöÎÀ\"\u00114{32\u000eIxòÁcÿQrÉH=Ó^¦»\u001b*ôWúpm\u0017\bÎv?©:÷%|KR!$áh&®ëå\u0000>WhËo\u001bìw\u0005\u0003ý\u0007¿]©v[\u0006vëUñÀu4c¨/ÊÛìëx«¹\u0002ÉS\u001cO&w¤Ã÷Ü1\u0003gØùÅ¸mVo\u0018-\u000f$xsÓ=7êq\u001b®%çj\u0014\u0004È\u0019·rö¦Û\u000e¸Õ½\u0004Ñú\u000fÔ³\u000b\u0003\u0013«LÐ6ÈÝ9\u0006ÁoÏ6PÌJ°KCp9\\oÚ\u001bQgå\u0019\frPþ#¥Ó fD\u000fÕ*@æªàC4©\u0018°ìBaÎÑ\u0013ß/CP#;\u001dÔqSÜ\u001d©¥¬ÿaÖ\u001a¢(cãk«n£àÒ¿ÀJ¨QÁàg\u0005¾§,ßBüR\u001aH\u0004ãÃë°ò\u0010PiÑóG¨ãKó÷\u0002\t«êÏáËcÌÒTfò«\u0019ó<P\u0011\u0011¼\b\u0006\u000fAæÌ´åÅ³C¤\u0002\u0015JEÃç­óTNör#|æH\u001fÅ7I¢\u0013\\¾Õ×jÃr7q\u001f%­XòHºú½7\b/¤<¦QiÒ\u001e#GbV¾øny/À3w×# EæO\u000foïVèÄÖ3Kbºä\u000eèLW½ñ\u0014*÷cJ:Üü#ýúÝ\"ÈL]\\z}Û;ºZ(íbóaRr=M\u0014«Ð®è\t-ñu±T\u0003\u0012Ri-b÷Ü`_©åÄE±\u0019\r4W¹Ø¥¼a\u001cõø7}y¹ê(\u000bT8èÍÇòU\u0005=Z\u0019&N+N\u001fóÐ\u00188g\u0004-ì1»\u000f\\We¨Ê¸ì\\ÓÌm­t±u\u0019p&Õ\u0014yùí3¼ï~\u0013øi@IÛ]D\u0014\u0003ól\u0014ëÌ\u0011:A\u0004ÌøEjd\u001bí\u0006#@TuYDÂ\\xdä\u0017\u0006óZ¶ìÂ\u001bä\u0006Ãw\u0003²wS0Ì¸jNç|æ«*¨àÒñÐ«dÖÑ3úªõGÇ\\Ü1Ð5\u0014:\u000f-\u000e\u001a\u0010¬}\u0005ínñ\u000eoÀ¶âh\b~±áüV¹Ñþ\u0001lá\t'µ{&\u001cCo\u001cRNÄ*ø\u000e·Á°crNbõ8Eûçüh¢ô¹lP\u0013Þô¶¼Eæ¢FãÉj\u000f\u001cZãllcDÃu\fÀå\u0010c¹é>@à$>S\u0001\u000f\u001aDwu\u0015IÙ¬}£Rþ-/èU:[Ø^òô>¨hS\u0014Ñä\u0001`¶d\rÙÜ\u001c¤§.Ô~Ú\fá¢²\u000e`Ñ·4È\u0016J?÷3\u0017)QtèMTepT^\u0014½c\u001dÍäå®íÐB¯¿¸b\u0006t\u0006gá\u001d¡áæe|\u0015QûAÇáÎwµíulÕÉÜ\fR\"ä^ÂÝ¤êÏR(\t\t\\MÚVß\"{*\u001eÐÛüÃ¦!íê\u001bõ!ÃU)\u00173ÉXØ\u000fñ£ÍÏ½áSÅN\u0000¡\u0002*),\u0006øÓ\u0016öýU!HÄãh¤8Io/\u0015íRýÄ¦è;\\Njö6Óå2{=Áú\u0016Øï\u0004\u0014Í.«\u001a\u000eéÇUJeX°í`|¶âîIÊ/g\u001e§%#ÄùîÇE)i o\u0003É\b\\÷#·çËd!v9h¼?>»*\u001a·öWieý°¦r¿AÌS?årMä÷#+\u0012¯A³\u000f\\à\f)odÏ^HhÏlÄ#ÿÔ×,÷Î9¯ÂNô¼ñ\"7«0§\nÌÌëÅù~O°l\u0006²Øu ü\u0004zC~ýp\f]lt\u0015Æc\u001dFý¥h>\bÉbÇ=±\u0016ì£y\u0007ß\u0000\u00058EîõÃ5°ùW!Y¯Æ\u0011ºÖ\u0002+¸/þm\u001aÄ\"ì<±%`½\r(àGÀIº\u0005/ië±ñ\u0007\u0003ÄàÒÀ,\u001f\u001e\u0015bÞ\u000eçf¾*ËDý\u0006\u000668öt\u000bH®é0ÐDÒÅ-[Ø\u001eåÿ\u0018o+í\u0007\fµº#U5\fÿA\u0011´±¯\rÒRéK<Pñ à\u0012#:ðºh£ê8\u0005-v\u001b« ÕÓxÂ©v_ÿ\u0015dß\u0017Q\u0017Èï´]ir\u001f'\rìñÞòä#ÊåÒÓéÉ\"x`\u0011W\u0005SyÊfet\u0010/q\u0001\u001dÈÍÎrõ¤>\u001bÏ\nP÷éæU!ZÍ\u001eÊTå êßî*\u0014¿ád¤eùLp\n\u001eùy\u0002Ü^âú!y\"æje\nsÉî\n¼|ð:\u0019¢º®O|D¦÷õÝªPÌ_TüZc©½OÿqiF» ÔûÙ÷#¢\u001fyu¼p¦®Q®#\u000eK[éöÕ)&ÖèK ^ÅG\u001fe\u000e»\\þ¿Z6Ð\u0006\u0004\u000béÕ'\fÀ\rW©ÃÈõz5ky\fôâ i\r«)Lü>\u00001Å¹ÿ\u001dX\u0019U¹E9ûùìpÙtæ]ô\nîGÚ´U\n·\u0005ò\u0018Q2iâ?=d\u0017\u001dXþ{Ñ³_·{g<æ\t¦>âé·±\u001c\u0010^ñ{ÿ<½hôe\nª\u0004Á^IÓ¶/8ëÂ\b?H­®oååú¹dÁBB@¿2$b¿\u001d.C$¬²uøÊ±Í\u0013\t\u0001AµþÂÕñ¤3Ø\n\u0014SÇL|ÀÃÓ\u001e&Í5WÖzv*Ú°ç·Úo¸·Î^û&³0\u0013\u0007(pq¡çÇèÐ\u0007\u0019hy¦K\u0001Æ\u0018sû»ß&;Ù¶Hx[?_>©äxÏãe¨(¥§\u00112\u0001dV3Íñ\u0018\u0014êË\u0006]3\tIÁ^ÊwWJçOcÏ\"\u0002¦1Êø\\óþèt~É$¢\u000190\u001f÷\u0012£,\u0014FNÉ\u0013.É\u0004Þq%à2Ì'·\u00190geì\u0003Ú\u0018l¢øpqþ\u0016.ë ~\u001eÇí¦%\u0004\u0001X\ruª\u0014½Éú5¶³~&ýpº²Oî{=Ò)´\u00051¤ÈÒ¸Å7Ö\u0000g£Ñ»\u0003Y¾Î\r«_q4Bî\u001e'jR<1\fär·§«Sfò¥}_ùÛ¹±ëÖw-Êv\b\t)ÌáO×q\u0017RY÷Î\u0006\u001a¡\\¼«\u0001éÑUxbÈc{ïÆ#q8õ\u0006KñÑídGÊýøA{Dx\u0004~]\rXÊú11ÿlB&¢ÿëËsQ\nÞøµ¶jø»Yv¿ºaÎÌP?àYä¸OcMBf Ìãk,HrUN1©\u0016<\u0005j?ã¦^Õ/¨»jö¶Æ<\u001bw«ëÃ\u0005¡ØO\u0004É\u001dª<é¢ë\u0011ÍnS\të(<z!P¤0«`cóLà®¨¤Ó/\u0002\u0012á\u0012DïÆ\u0000;\u0003vK³ÅsòÓ0\u0011\u0000¶×M\u001c-(õø\u00147Á¦×?9Ìú§¤\rÉ\f\u001cd\u001cT_\u00132¢¼@Ù\rÝµ2iÝôîáV·µj¡|»\u0018¤{7§À«\u000bäU>v\r#\u0004\u001e¨\u0012UóFIáPñº\u0014à\u0019L&0CmÆëK°+þzb7<@Á\u0016Gæ$Ô@ß~Þ\u0019<\n\u001c\u0006jpa­ÜX«ú-£l\u001c)ç± kVQQºM\u0014Ê\u00002èî¬\u0001PÍ>¾\u001aÛ¯Tõý\u0019|_\u0017õlÓ8)¯ç!ÍYÝ\u0010­Ì·\"\u0005½P_j½-HNÙECÌ¹À§dÜ\"AøÈëd\u0016·°d\r\t0Ý\u001f<ôwx¤8þN\u000f\th¼°Lf_7u¦fQáú\u0015ÂÊZþK(Ð\u0004MSx{ÉíÙÏhãbýå\u0007~ÊÊ\u000bL¬\u0007ºNææ\u001d±?\u0003\n×\u0014;\u000b#£\u001eß\u0004®úº\u0014Ù\u000eÍvYpz3Zb04꧂꧂",
      "chapterName": "n",
      "chapterUrl": "u",
      "nextTocUrl": ".pages a:matchesWholeOwnText(下一页|>)@href\n<js>\nif (result[0]&&result[0].length()>9) `data:;base64,${java.base64Encode(result[0])},{\"type\":\"mux\"}`;\nelse [];\n</js>",
      "preUpdateJs": "if (java.get(\"page\")!=\"0\") java.put(\"page\",1);",
      "updateTime": "i"
    },
    "searchUrl": "<js>\nlet nn = getsurl();\nlet url = `${nn}/modules/article/search.php`;\nif (key.startsWith('书名：'))\nurl += `?searchkey=${key.substr(3)}&searchtype=articlename&page=${page}`;\nelse if (key.startsWith('作者：'))\nurl += `?searchkey=${key.substr(3)}&searchtype=author&page=${page}`;\nelse if (key.startsWith('标签：'))\nurl += `?searchkey=${key.substr(3)}&searchtype=keywords&page=${page}`;\nelse\nurl +=\t`?searchkey=${key}&searchtype=all&page=${page}`;\nlet option={};\noption[\"headers\"]=gethd();\nurl+','+JSON.stringify(option);\n</js>",
    "variableComment": "\n♦书籍变量：\n　 ①填写  🔒 并刷新，关闭本书评论显示\n　 ②填写“目录”并刷新，强制刷新目录\n　 ③填写分数并刷新，使用分数进行评分\n　 ④填写其它并刷新，内容作为评论发送\n分数格式示意“1分”“2分”…“10分”\n\n㊟默认详情页检测到有更新内容时才会刷新目录\n\n！注意区分源变量和书籍变量\n",
    "weight": 0
  }
]