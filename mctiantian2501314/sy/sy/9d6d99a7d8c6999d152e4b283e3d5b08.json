[
  {
    "bookSourceComment": "基于 PyFQWeb 项目开发的 Legado 兼容书源\n书源编写by:梓澄qwq，项目by:梓澄qwq\nQ群 源论坛\n20250401修复短剧\n/*\n模式1\n搜索模式默认是搜书\n需要漫画则在关键字前加m:即m:系统\n听书则为t:系统 \n短剧则为d:系统\n\n模式2\n需要其他则在关键字后加@\n小说则为系统@小说\n漫画则为系统@漫画\n听书则为系统@听书\n短剧则为系统@短剧\n\n模式3\n点击切换模式（根据提示搜书）\n*",
    "bookSourceGroup": "-  ♛  🐉 联盟部署一条龙(正式版)",
    "bookSourceName": "🍅 番茄联盟2.0[多口暗版]",
    "bookSourceType": 0,
    "bookSourceUrl": "本书源声明\n本源只限群里内部使用，接口禁止泄露出去，一经发现，源作者不介意，随时把接口都关了！让大家都没得玩！\n\n\n2025年8月16日14:40更新日志\n(多口暗文接口内部版)\n\n1.在原来的书源的基础上再更换个项目！\n\n2.移植优化了个当前接口检测功能\n(从晴天那里移植过来的！清词大佬重新适配)\n\n3.由于当前项目没有发现页，我直接保留原版代替！(接口用的是龙珠大佬的)\n\n4.由于当前项目的详情页有问题(无法利用id搜书)我直接替换个官方版接口，为此详情页也跟的替换了\n\n\n5.加入错误提示文本\n(清词大佬提供)\n1.审核文\n2.因为下载被封设备\n\n以上两种随便一个情况都会遇到这提示！\n\n6.本源支持四合一，短剧这块，搜索限制搜不出，如果有番茄动漫对应的ID号可以试试搜索看！\n\n7.默认播放器保持不变\n\n8.配合接口识别，原本识别明文的密钥现在变更成b64编码的密匙！\n(这个是预留，如果当前接口不用密钥的话请无视这条！)\n\n除了以上问题，我尽量把当前新项目的对应接口规则给保留！\n\n\n\n当然书源肯定不止有这个已知问题，如果还有其他的尽管群里反馈！能修就修，不能修我摊平！\n\n\n\n往期更新日志\n\n更新说明:2025年7月28日13:20\n开发版，正文明码，方便调试！\n2025年7月28日12:57(开发版)\n\n1.优化查询模式和搜索提示的排面！\n2.修复小说模式状态查询时没有显示当前音色提示！\n3.加入冷权大佬制作的小说和短剧网页版！\n4.移植冷权大佬的密钥输入功能(预留)\n5.加入一个在线阅读\n\n\n\n2025年7月20日18:31\n本次更新是在之前群里发布的聚合版的基础上更新的，所以原版的移植功能我就不再多介绍，现在把本次更新内容公布如下！\n1.修复之前的初始化的部分切换没效果，同时修复初始化点查询模式显示异常问题(获取模式失败:Empty JSON string)，现在哪怕没搜索书籍和切换模式，初始化一律都是小说模式可以正常查询！\n\n2.原版发现页默认需要手动切换模式才能显示出来，由于今天冒出乌龙，所以直接把发现页默认模式更改成小说发现页，又有的小说切换不受影响！\n3.原版用来切换发现页的切换位置，现在也支持了切换！番茄的四大搜索模式(而原有搜索方式也保持不变，就当做多了一种快捷方式吧！)\n4.短剧正文默认播放器更换了！\n5.修复短剧播放器上角不显示当前集数问题\n6.修复橙子项目的短剧接口，正文播放链接显示不出来问题！\n\n\n番茄联盟成员(来源公示牌)\n书源制作来自:Yolo\n正文接口项目:梓澄qwq\n内置正文接口:咕噜大王\n初始化服务器:咕噜大王\n新增正文接口:梓澄qwq\n原版搜索模式:Yolo\n新增搜索模式:Buding\n短剧正文修复:Buding\n初始化修复者:Buding\n发现页初始化:小说\n初始化模式:小说\n新增搜索切换:天天的鸟蛋蛋\n新增切换提示:清词\n音色切换专属:清词\n真人切换专属:清词\n服务器换位置:晴天\n小说正文接口:自定义(不固定)\n听书正文接口:自定义(不固定)\n漫画正文接口:自定义(不固定)\n短剧正文接口:自定义(不固定)\n内置正文接口1:鲸落\n内置正文接口2:鲸落\n内置正文接口3:薯条\n内置正文接口4:薯条\n内置正文接口5:喵公子\n内置正文接口6:喵公子\n内置正文接口7:雨洛\n内置正文接口8:祁鸠\n内置正文接口9:晴天\n内置正文接口10:阿鹏\n内置正文接口11:明月照大江(1417246566)\n内置正文接口12:喵公子\n内置正文接口13:喵公子\n内置正文接口14:终忆(2451833022)\n内置正文接口15:梓澄qwq\n内置正文接口16:梓澄qwq\n内置正文接口17:梓澄qwq\n发现遗漏修复者:清词\n书架异常修复者:清词\n默认搜索修复者:清词\n短剧正文修复者:情无羁\n音色功能补全者:一根薯条\n音色大全说明:以下所有音色IP都是根据之前收集书籍里出现过的，所以看的跳来跳去的音色数字实属正常，下次如果有看到遗漏再新增，否则大概样本如下！\n\n服务器切换移植:另一个书友圈\n(服务器切换来源:晴天)\n\n特别声明:本书源是基于Yolo大佬的番茄聚合源，微移植而来的，本源里所有修复和移植的都是拜托群里的各大佬修改的(具体来源楼上已经标明)本人只是大自然的搬运工！由于拜托的大佬修改众多，索性改个书名好区分原版！\n本的取之于民用之于民的原因，本源只限小范围传播，如果还有好的功能，想要增加或者移植，有缘人可以再自行添加移植，只是切记请勿倒卖本源！和去源作者面前跳梁！\n如果不喜欢新增的移植功能可自行把本源删除，以避免不必要的麻烦！\n\n不出意外的话，这可能是最后一个版本了各位有缘再见！\n(最近拜托大佬修复移植有点恨，我都自己感觉尴尬🌚！)\n\n随时欢迎源作者监督，移植功能如果不想被人二次移植的话，随时欢迎群里说声，书源立马删了！\n开坑时间:2025年6月22日11:31\n整理时间:2025年8月15日12:22",
    "bookUrlPattern": "https?://.*(fqnovel|snssdk|fanqienovel|changdunovel|sukimon|gyks)\\.(com|me).*[0-9]{19}.*",
    "customOrder": 0,
    "enabled": true,
    "enabledCookieJar": false,
    "enabledExplore": true,
    "exploreUrl": "@js:\n\nlet sort = [];\npush = (title, url, type) => sort.push({\n    title: title,\n    url: url,\n    style: {\n        layout_flexBasisPercent: type\n    }\n});\nfaxian=source.getVariable()\nif(faxian.match(/短剧/)){\n  push(\"📖短剧分类📖\",null,1,1);\narList1=[\"新剧\",\"逆袭\",\"霸总\",\"现代言情\",\"打脸虐渣\",\"豪门恩怨\",\"神豪\",\"马甲\",\"都市日常\",\"战神归来\",\"小人物\",\"女性成长\",\"大女主\",\"穿越\",\"都市修仙\",\"强者回归\",\"亲情\",\"古装\",\"重生\",\"闪婚\",\"赘婿逆袭\",\"虐恋\",\"追妻\",\"天下无敌\",\"家庭伦理\",\"萌宝\",\"古风权谋\",\"职场\",\"奇幻脑洞\",\"异能\",\"无敌神医\",\"古风言情\",\"传承觉醒\",\"现言甜宠\",\"奇幻爱情\",\"乡村\",\"历史古代\",\"王妃\",\"高手下山\",\"娱乐圈\",\"强强联合\",\"破镜重圆\",\"暗恋成真\",\"民国\",\"欢喜冤家\",\"系统\",\"真假千金\",\"龙王\",\"校园\",\"穿书\",\"女帝\",\"团宠\",\"年代爱情\",\"玄幻仙侠\",\"青梅竹马\",\"悬疑推理\",\"皇后\",\"替身\",\"大叔\",\"喜剧\",\"剧情\"]\narList1.map((uri)=>{\nurl=`http://novelsdk.hhlqilongzhu.cn/fq/classname.php?classname=${uri}&showRawParams=ture&offset={{(page-1)*10}}`;\npush(uri,url,0.29);\n});} if(faxian.match(/听书/)){\npush(\"📖听书分类📖\",null,1,1);\narList = [\"都市\",\"穿越\",\"现代言情\",\"古代言情\",\"总裁\",\"玄幻\",\"重生\",\"悬疑\",\"灵异\",\"系统\",\"种田\",\"甜宠\",\"宠妻\",\"都市生活\",\"赘婿\",\"先婚后爱\",\"宫斗宅斗\",\"都市日常\",\"战神赘婿\",\"神医\",\"影视小说\",\"传统玄幻\",\"王妃\",\"奇幻仙侠\",\"萌宝\",\"都市脑洞\",\"职场\",\"嫡女\",\"都市修真\",\"幻想言情\",\"神豪\",\"空间\",\"其他\",\"玄幻言情\",\"玄幻脑洞\",\"历史古代\",\"科幻末世\",\"年代\",\"天才\",\"女强\",\"推理\",\"腹黑\",\"诸天万界\",\"医术\",\"星际\",\"鉴宝\",\"团宠\",\"扮猪吃虎\",\"武侠\",\"现言脑洞\",\"都市种田\",\"无敌\",\"盗墓\",\"马甲\",\"皇后\",\"特种兵\",\"大唐\",\"公主\",\"娱乐圈\",\"青梅竹马\",\"古言脑洞\",\"历史脑洞\",\"末世\",\"剑道\",\"现言甜宠\",\"游戏动漫\",\"洪荒\",\"快穿\",\"明朝\",\"外卖\",\"校花\",\"奶爸\",\"校园\",\"三国\",\"直播\",\"穿书\",\"海岛\",\"美食\",\"反派\",\"现言复仇\",\"西游衍生\",\"求生\",\"民国\",\"家庭\",\"学霸\",\"皇叔\",\"宠物\",\"无CP\",\"女扮男装\",\"网游\",\"病娇\",\"精灵\",\"虐文\",\"都市青春\",\"清穿\"];\narList.map((uri)=>{\nurl=`http://novelsdk.hhlqilongzhu.cn/fq/classname_tingshu.php?classname=${uri}&offset={{(page-1)*10}}`;\npush(uri,url,0.29);\n});}else if(faxian.match(/漫画/)){\npush(\"📖漫画分类📖\",null,1,1);\narList2=[\"热门推荐\"]\narList2.map((uri)=>{\nurl=`https://api5-normal-sinfonlinec.fqnovel.com/reading/bookapi/bookmall/cell/change/v:version/?limit=20&current_chapter_num=0&aid=1967&tag_id=0&plan_id=0&ac=wifi&app_name=novelapp_variant_v2&os_version=18.5&iid=2411663285563019&tab_type=9&update_version_code=67533&search_tab_type=0&genre=0&device_model=iPhone15%2C2&version_name=6.7.5.33&cell_id=7023314149891375141&pad_column_detail=0&ClickedContent=W10%3D&sub_tag_id=0&rank_list_style_type=0&rank_sub_info_id=0&klink_egdi=AAL8eVdN0ma8sDkOGcfpzFQjsf62pCtkaxs8X2ndGYw_AI6P3hEWCuz6&cell_gender=2&change_type=0&recent_impr_gid=7461838050453113918%2C7374719335769590808%2C7494182372523396158%2C7473802495936957464%2C7507560341132299289%2C7498717796600138814%2C7514907882270231577%2C7348263691181116478%2C7464019435234282521%2C7504716446585343038%2C7506452496731081753%2C7374719335769590808%2C7505235805850323993%2C7461838050453113918%2C7494182372523396158%2C7473802495936957464%2C7498717796600138814%2C7507560341132299289%2C7101602409062927391%2C7498737413473192984%2C7503815464926055449%2C7052966744549477412%2C7369103319497133118%2C7103384366788643853%2C7158721504912575524%2C7235943368230964282%2C7502315887584611353%2C7023626646632533000&session_id=2025062617295020EFDFF3E5757B6D95A4&page=0&device_brand=iphone&device_id=3226436911265579&ecom_category_id=0&resolution=1179%2A2556&client_req_type=2&book_type=0&cell_sub_id=0&gender_list_type=0&algo_type=0&ecom_impression_start_time=0&screen_width_px=1179&category_id=0&show_type=0&cold_start_session=0&ssmix=a&book_comment_id=0&channel=App%20Store&ecom_sort_by=0&ecom_refresh_type=0&inner_category_id=0&inner_algo=0&cdid=6726E8CF-92FF-4C1F-B8BB-AEE64E0B8811&genre_type=0&author_landpage_req_type=0&author_id=0&version_code=675&related_book_id=0&sstimor_tab=0&compliance_status=0&need_personal_recommend=1&gender=2&page_entry_time=0&offset={{(page-1)*20}}&device_type=iPhone%2014%20Pro&device_platform=iphone&idol_req_type=0&source_tab_type=0&pad_column_cover=0&web_page_version_code=0&client_template=0&rank_sub_info_type=0&image_shrink_datas_str=W3sic2hyaW5rX3R5cGUiOjEsImltYWdlX3dpZHRoIjo1ODksImltYWdlX3R5cGUi%0D%0AOjF9LHsic2hyaW5rX3R5cGUiOjIsImltYWdlX3dpZHRoIjozOTMsImltYWdlX3R5%0D%0AcGUiOjJ9LHsic2hyaW5rX3R5cGUiOjMsImltYWdlX3dpZHRoIjoxMTc5LCJpbWFn%0D%0AZV90eXBlIjozfSx7InNocmlua190eXBlIjo0LCJpbWFnZV93aWR0aCI6MTA4LCJp%0D%0AbWFnZV90eXBlIjo0fV0%3D&session_uuid=D56E164E-0CA5-4E7A-A646-41A848E6A5C2&total_chapter_num=0&sub_genre=0&unlimited_selector_change_type=0&idol_tag_id=0`;\npush(uri,url,1);\n});\n} else {\n    push('番茄书架', 'https://fanqienovel.com/reading/bookapi/bookshelf/info/v:version/?aid=1967&iid=0&version_code=56910&update_version_code=56910', 1);\n    push('巅峰榜单', 'https://fanqienovel.com/api/author/misc/top_book_list/v1/?limit=100&offset=0', 0.29);\n    push('出版榜单', 'https://fanqienovel.com/api/node/publication/list?page_index=0&page_count=100', 0.29);\n    push('爆更榜单', 'https://api-lf.fanqiesdk.com/api/novel/channel/homepage/rank/rank_list/v2/?aid=13&limit=50&offset=0&side_type=15&type=1', 0.29);\n    push('黑马榜单', 'https://api-lf.fanqiesdk.com/api/novel/channel/homepage/rank/rank_list/v2/?aid=13&limit=50&offset=0&side_type=13&type=1', 0.29);\n    push('热搜榜单', 'https://api-lf.fanqiesdk.com/api/novel/channel/homepage/rank/rank_list/v2/?aid=13&limit=50&offset=&side_type=12&type=1', 0.29);\t\n    push('每周推荐', 'https://fanqienovel.com/api/rank/recommend/list?type=1&limit=10&offset=0', 0.29);\t\n\t\n\tA=[[\"推荐\",\"10\"],[\"完结\",\"11\"],[\"热搜\",\"12\"]]\t;\n[[\"男频\",\"1\"],[\"女频\",\"0\"]].map([title,id]=>{\n\tpush('❤️'+title+'小说榜单❤️', null, 1);\n\tif(id==2){ \tA=A.slice(1,A.length-1) }\n\t\tA.map([title,uri]=>{\t\t\t\n\t\t  \turl= `https://novel.snssdk.com/api/novel/channel/homepage/rank/rank_list/v2/?aid=13&app_name=news_article&app_version=9.7.3&channel=tengxun_tt&device_platform=android&os=android&device_type=ProjectTitan&os_api=29&os_version=10&openlive_plugin_status=1&isTTWebViewHeifSupport=0&limit=100&offset={{(page-1)*100}}&side_type=${uri}&type=${id}`;\n\t\t\t\tpush(title, url, 0.29);\t\t\t\n\t\t\t});\n\t});\t\n\t\n\tcategory = () =>{\n\t\t\tcategory_url = \"https://novel.snssdk.com/api/novel/channel/homepage/new_category/page/data/v1/?aid=13\";\nreturn  JSON.parse(java.ajax(category_url)).data\t\t\n\t\t}\n\t\t  \n  json = (data) => {\n     boy = data.boy_category;\n     girl = data.girl_category;\n     publish = data.publish_category;\n     json = [[\"男频\",\"gender=1\",boy],[\"女频\",\"gender=0\",girl],[\"出版\",\"genre_type=160\",publish]];\n     return JSON.parse(JSON.stringify(json));\n   }\t\n\t\tjson(category()).map([tit1,gender,category]=>{\n\t    push('❤️'+tit1+'小说❤️', null, 1);\n     category.map(($,index)=>{\n     \tindex++;\n\t    title = $.category_name;\n     \tcid = $.category_id;\n\t    url=  `https://novel.snssdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&app_name=news_article&app_version=9.7.3&channel=tengxun_tt&creation_status=9&device_platform=android&enter_from=novel_category&novel_host&novel_version&version_code=973&version_name=9.7.3&word_count=9&os=android&device_type=ProjectTitan&os_api=29&os_version=10&offset={{(page-1)*100}}&limit=100&category_id=${cid}&${gender}`;\n\t\t\t\tpush(title, url, 0.29);\t\n      });\n  });\n  }\nJSON.stringify(sort);",
    "jsLib": "var host = [\n'http://43.248.77.208:6789',\n'http://54.185.70.58:1234',\n'http://114.66.37.222:1234'\n]\n\n\n\nfunction getArguments(open_argument,key) {\n    try {\n        open_argument = JSON.parse(open_argument);\n    } catch (e) {\n        open_argument = {\n             \"search\": \"-1\",\n            \"tone_id\": \"-1\",\n            \"server\": \"http://43.248.77.208:6789\",\n               \"st\": 3,\n\t\"sz\": \"0\",\n\t\"tone\": \"\"\n        };\n     }\n    \n    \n    \n    \n    if (key) {return open_argument[key];} else {return open_argument}\n}\n\nfunction splitArray(input, size) {\n  const output = []\n  for (let i = 0; i < input.length; i += size) {\n    output.push(input.slice(i, i + size))\n  }\n  return output\n}\n\nfunction getNovelComment(book_id, type) {\n    const { java, source, book } = this\n    if (type == 0) {\n    let count = book.getVariable(\"custom\")\n    if (count && count == \"\") count = 5\n    let res = java.ajax(`https://changdunovel.com/reading/ugc/novel_comment/book/v1?query_type=0&offset=0&count=${count}&sort=create_time&need_hot_comment=0&book_id=${book_id}&aid=1967&addQueryPrefix=true`) \n    let comments = JSON.parse(res).data.comment\n    let result = `\\n📄 书评：${comments.length>0?(\"(共 \"+ comments.length +\" 条)\"):\"\"}\\n`\n    comments.forEach(c => {\n        let startNum = 5 - parseInt(c.score/2)\n        result += `${c.user_info.gender==1?\"👨🏻\":\"👱🏻\"} ${c.user_info.user_name} || ${\"★★★★★★☆☆☆☆☆\".slice(startNum, startNum + 5)}\\n${c.text}\\n&lrm;\\n`\n    })\n    return result\n    } \n  result = \"\"\n  return result\n}\n\n\nfunction getHost() {\n  return \"http://novelsdk.hhlqilongzhu.cn\"\n}\n\n\n   \n    \n    function 密钥() {\r\n    const { java, source, book } = this;\r\n    let loginInfoMap = source.getLoginInfoMap();\n    let apikey = \"内置密钥预留处\"; \r\n    if (loginInfoMap && loginInfoMap['密钥'] && loginInfoMap['密钥'] !== \"\" &&  loginInfoMap['密钥'].includes('0')) {\r\n        apikey = loginInfoMap['密钥'];\r\n \r\n    }\r\n    return apikey;\r\n}\n\n",
    "lastUpdateTime": 1755400648891,
    "loginCheckJs": "if (source.getVariable()==\"\") {\n    eval(String(source.loginUrl));\n    reg(true);\n}\nresult",
    "loginUi": "[\n\n{\n        \"name\":  \"其他服务器(确定后✔返回点击切换)\",\n        \"type\": \"text\"\n},\n {\n        \"name\": \"其他音色ID(确定后✔返回点击切换)\",\n        \"type\": \"text\"\n},\n\n{\n  \"name\": \"手动登录Token\",\n  \"type\": \"password\",\n  \"action\": \"\"\n},\n\n\n\n{\n  \"name\": \"密钥\",\n  \"type\": \"password\",\n  \"action\": \"\"\n},\n\n\n\n\n{\n  \t\"name\":\"番茄小说(网页版)\",\"type\":\"button\",\n  \t\"action\":\"番茄小说()\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.45\n  }\n\n  \n  \t\n  \t\n  },\n  {\n  \t\"name\":\"番茄短剧(网页版)\",\"type\":\"button\",\n  \t\"action\":\"番茄短剧()\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.45\n  }\n\n  \n  },\n{\n  \"name\": \"发布页\",\n  \"type\": \"button\",\n  \"action\": \"发布页()\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.45\n  }\n},\n\n{\n  \"name\": \"在线阅读\",\n  \"type\": \"button\",\n  \"action\": \"在线阅读()\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.45\n  }\n},\n\n{\n    'name': '发现类型与搜索模式',\n    'type': 'button',\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 1\n  }\n},\n{\n    'action': \"set_faxian('小说')\",\n    'name': '小说',\n    'type': 'button',\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.2\n  }\n},\n{\n    'action': \"set_faxian('听书')\",\n    'name': '听书',\n    'type': 'button',\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.2\n  }\n},\n{\n    'action': \"set_faxian('漫画')\",\n    'name': '漫画',\n    'type': 'button',\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.2\n  }\n},\n{\n    'action': \"set_faxian('短剧')\",\n    'name': '短剧',\n    'type': 'button',\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.2\n  }\n},\n{\n  \"name\": \"查看教程\",\n  \"type\": \"button\",\n  \"action\": \"tutorial()\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.45\n  }\n},\n\n\n\n\n\n{\n  \"name\": \"查看Token\",\n  \"type\": \"button\",\n  \"action\": \"logToken()\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.45\n  }\n},\n{\n    \"name\": \"套娃更新\",\n    \"type\": \"button\",\n    \"action\": \"A()\",\n    \"style\": {\n      \"layout_flexGrow\": 1,\n      \"layout_flexBasisPercent\": 1\n    }\n  },\n{\n  \"name\": \"账号登录\",\n  \"type\": \"button\",\n  \"action\": \"l2(true)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.45\n  }\n},\n{\n  \"name\": \"退出登录\",\n  \"type\": \"button\",\n  \"action\": \"logout()\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.45\n  }\n},\n\n{\n            \"name\": \"🎚切换服务器\",\n            \"type\": \"button\",\n            \"action\": \"set_server()\",\n            \"style\": {\n                \"layout_flexGrow\": 1,\n                \"layout_flexBasisPercent\": 0.4\n            }\n        }, {\n            \"name\": \"♻️检测当前服务器\",\n            \"type\": \"button\",\n            \"action\": \"checkNet()\",\n            \"style\": {\n                \"layout_flexGrow\": 1,\n                \"layout_flexBasisPercent\": 0.4\n            }\n        }, \n\n      \n{\n  \"name\": \"切换自定音色\",\n  \"type\": \"button\",\n  \"action\": \"set_tone_id()\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.45\n  }\n},\n\n\n{\n  \"name\": \"查询模式\",\n  \"type\": \"button\",\n  \"action\": \"get()\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.45\n  }\n},\n{\n  \"name\": \"正常模式\",\n  \"type\": \"button\",\n  \"action\": \"set(0)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.45\n  }\n},\n{\n  \"name\": \"切换模式\",\n  \"type\": \"button\",\n  \"action\": \"st(0)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.45\n  }\n},\n\n\n  \n{\n  \"name\": \"请先确定当前书籍支持的音色再切换！\",\n  \"type\": \"button\",\n  \"action\": \"get()\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 2.45\n  }\n},\n  \n  \n    {\n  \"name\": \"真人发音\",\n  \"type\": \"button\",\n  \"action\": \"set(2)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 2.25\n  }\n},\n\n  \n\n{\n  \"name\": \"音色1\",\n  \"type\": \"button\",\n  \"action\": \"set(3)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n\n{\n  \"name\": \"音色2\",\n  \"type\": \"button\",\n  \"action\": \"set(4)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n\n{\n  \"name\": \"音色4\",\n  \"type\": \"button\",\n  \"action\": \"set(5)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n\n{\n  \"name\": \"音色5\",\n  \"type\": \"button\",\n  \"action\": \"set(6)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色6\",\n  \"type\": \"button\",\n  \"action\": \"set(7)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n\n{\n  \"name\": \"音色7\",\n  \"type\": \"button\",\n  \"action\": \"set(8)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色8\",\n  \"type\": \"button\",\n  \"action\": \"set(9)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n\n\n\n{\n  \"name\": \"音色9\",\n  \"type\": \"button\",\n  \"action\": \"set(10)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n{\n  \"name\": \"音色10\",\n  \"type\": \"button\",\n  \"action\": \"set(11)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n\n{\n  \"name\": \"音色11\",\n  \"type\": \"button\",\n  \"action\": \"set(12)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n{\n  \"name\": \"音色12\",\n  \"type\": \"button\",\n  \"action\": \"set(13)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n\n{\n  \"name\": \"音色14\",\n  \"type\": \"button\",\n  \"action\": \"set(14)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色15\",\n  \"type\": \"button\",\n  \"action\": \"set(15)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色16\",\n  \"type\": \"button\",\n  \"action\": \"set(16)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n{\n  \"name\": \"音色17\",\n  \"type\": \"button\",\n  \"action\": \"set(17)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色18\",\n  \"type\": \"button\",\n  \"action\": \"set(18)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色21\",\n  \"type\": \"button\",\n  \"action\": \"set(19)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色22\",\n  \"type\": \"button\",\n  \"action\": \"set(20)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色23\",\n  \"type\": \"button\",\n  \"action\": \"set(21)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色26\",\n  \"type\": \"button\",\n  \"action\": \"set(22)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色27\",\n  \"type\": \"button\",\n  \"action\": \"set(23)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色28\",\n  \"type\": \"button\",\n  \"action\": \"set(24)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n{\n  \"name\": \"音色29\",\n  \"type\": \"button\",\n  \"action\": \"set(25)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n\n{\n  \"name\": \"音色30\",\n  \"type\": \"button\",\n  \"action\": \"set(26)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n{\n  \"name\": \"音色31\",\n  \"type\": \"button\",\n  \"action\": \"set(27)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n{\n  \"name\": \"音色32\",\n  \"type\": \"button\",\n  \"action\": \"set(28)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n\n{\n  \"name\": \"音色51\",\n  \"type\": \"button\",\n  \"action\": \"set(29)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n\n{\n  \"name\": \"音色53\",\n  \"type\": \"button\",\n  \"action\": \"set(30)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色55\",\n  \"type\": \"button\",\n  \"action\": \"set(31)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色56\",\n  \"type\": \"button\",\n  \"action\": \"set(32)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色57\",\n  \"type\": \"button\",\n  \"action\": \"set(33)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色58\",\n  \"type\": \"button\",\n  \"action\": \"set(34)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色59\",\n  \"type\": \"button\",\n  \"action\": \"set(35)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色60\",\n  \"type\": \"button\",\n  \"action\": \"set(36)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n\n{\n  \"name\": \"音色61\",\n  \"type\": \"button\",\n  \"action\": \"set(37)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色62\",\n  \"type\": \"button\",\n  \"action\": \"set(38)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色63\",\n  \"type\": \"button\",\n  \"action\": \"set(39)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色64\",\n  \"type\": \"button\",\n  \"action\": \"set(40)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色67\",\n  \"type\": \"button\",\n  \"action\": \"set(41)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色68\",\n  \"type\": \"button\",\n  \"action\": \"set(42)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n\n{\n  \"name\": \"音色71\",\n  \"type\": \"button\",\n  \"action\": \"set(43)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n\n{\n  \"name\": \"音色72\",\n  \"type\": \"button\",\n  \"action\": \"set(44)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色73\",\n  \"type\": \"button\",\n  \"action\": \"set(45)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n\n{\n  \"name\": \"音色74\",\n  \"type\": \"button\",\n  \"action\": \"set(46)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n{\n  \"name\": \"音色75\",\n  \"type\": \"button\",\n  \"action\": \"set(47)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色76\",\n  \"type\": \"button\",\n  \"action\": \"set(48)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色77\",\n  \"type\": \"button\",\n  \"action\": \"set(49)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色78\",\n  \"type\": \"button\",\n  \"action\": \"set(50)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色79\",\n  \"type\": \"button\",\n  \"action\": \"set(51)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色80\",\n  \"type\": \"button\",\n  \"action\": \"set(52)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色81\",\n  \"type\": \"button\",\n  \"action\": \"set(53)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n{\n  \"name\": \"音色82\",\n  \"type\": \"button\",\n  \"action\": \"set(54)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n{\n  \"name\": \"音色84\",\n  \"type\": \"button\",\n  \"action\": \"set(55)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色85\",\n  \"type\": \"button\",\n  \"action\": \"set(56)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n\n\n{\n  \"name\": \"音色100\",\n  \"type\": \"button\",\n  \"action\": \"set(57)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色101\",\n  \"type\": \"button\",\n  \"action\": \"set(58)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色102\",\n  \"type\": \"button\",\n  \"action\": \"set(59)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n{\n  \"name\": \"音色103\",\n  \"type\": \"button\",\n  \"action\": \"set(60)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色104\",\n  \"type\": \"button\",\n  \"action\": \"set(61)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n\n{\n  \"name\": \"音色105\",\n  \"type\": \"button\",\n  \"action\": \"set(62)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色106\",\n  \"type\": \"button\",\n  \"action\": \"set(63)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色107\",\n  \"type\": \"button\",\n  \"action\": \"set(64)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色108\",\n  \"type\": \"button\",\n  \"action\": \"set(65)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n\n{\n  \"name\": \"音色109\",\n  \"type\": \"button\",\n  \"action\": \"set(66)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色110\",\n  \"type\": \"button\",\n  \"action\": \"set(67)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n{\n  \"name\": \"音色111\",\n  \"type\": \"button\",\n  \"action\": \"set(68)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n\n{\n  \"name\": \"音色112\",\n  \"type\": \"button\",\n  \"action\": \"set(69)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n{\n  \"name\": \"音色113\",\n  \"type\": \"button\",\n  \"action\": \"set(70)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n\n{\n  \"name\": \"音色204\",\n  \"type\": \"button\",\n  \"action\": \"set(71)\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.25\n  }\n},\n{\n  \"name\": \"祝你天天开心哇 书源by:Yolo  接口by:梓澄qwq\",\n  \"type\": \"button\",\n  \"action\": \"t()\",\n  \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 1\n  }\n}\n]",
    "loginUrl": "\nfunction 番茄小说() {\n\tjava.startBrowserAwait('https://fqxsapi.wyyidc.cn', \"番茄小说\");\n}\n\n\n\nfunction 番茄短剧() {\n\tjava.startBrowserAwait('https://fqxsapi.wyyidc.cn/dj.html', \"番茄短剧\");\n}\n\n\n\n\nfunction A(){\t\njava.startBrowser('https://www.coolapk.com/link?url=legado://import/Source?src=https://dns.jingluo.love/2025/68a0244c78ab1.json','书源更新')\n\t}\n\n\nfunction 发布页() {\tjava.startBrowserAwait('https://Fb.Mlhh.Cn', \"发布页\");\n}\n\n\n\nfunction 在线阅读() {\tjava.startBrowserAwait('https://fq.66ds.de', \"在线看\");\n}\n\n\nfunction gets_key() {\n    var servers = String(source.bookSourceUrl);\n    const serverList = servers.split('\\n');\n    \n    for (let server of serverList) {\n        let key = String(cookie.getCookie(server)) || String(java.getCookie(server));\n        if (key) {\n            let keyParts = key.split('secretKey=');\n            if (keyParts.length > 1) {\n                key = keyParts[keyParts.length - 1];\n                setArgument('key', key);\n                return key;\n            }\n        }\n    }\n\n    return '';  \n }\n\n//获取服务器\nfunction get_server() {\n    var server = getArgument('server');\n    var tishi = '\\n\\n当前服务器：' + server\n    java.toast(tishi);\n    return server\n}\n\n\n\n//设置服务器\nfunction set_server() {\n    let zdyserver;\n    try {\n        zdyserver = String(source.getLoginInfoMap().get('其他服务器(确定后✔返回点击切换)'));\n        if (zdyserver.includes('http')) {\n            setArgument('server', zdyserver);\n            java.toast(`\\n\\n当前服务器为自定义服务器\\n${zdyserver}\\n\\n切换内置服务器请先清空自定义服务器中的数据`);\n        } else {\n            zdyserver = '';\n        }\n    } catch (error) {\n        zdyserver = '';\n    }\n    if (!zdyserver) {\n        const servers = host\n        const currentServer = getArgument('server') || '';\n        const currentIndex = servers.indexOf(currentServer);\n\n        const nextIndex = currentIndex >= 0 ? (currentIndex + 1) % servers.length : 0;\n        const nextServer = servers[nextIndex];\n\n        setArgument('server', nextServer);\n        java.toast(`\\n\\n当前服务器${nextIndex+1}:${nextServer}\\n\\n注意：切换服务器后需要在详情页刷新目录才能生效`);\n    }\n}\n\n\n\n// 检测服务器\nfunction checkNet() {\n    let url = getArgument('server');\n    java.longToast(`\\n\\n♻️正在检测：${url}\\n请稍等~`);\n    let date1 = new Date().getTime();\n    let html = java.log(java.ajax(url));\n    let date2 = new Date().getTime();\n    let t = date2 - date1;\n    let c = String(html).indexOf('接口说明'); // 关键内容检测\n    let time = t / 1000 + 's';\n    let logTime = '【' + url + '】\\n┋┋\\n' + '解析时间：' + time;\n\n    if (c == -1 || t > 5000) {\n        java.longToast('\\n💔【访问失败提示】\\n' + \n                      '┏┅━┅━┅━┅━┅┅━┅━┅┓\\n┋┋\\n' + \n                      logTime + '\\n┋┋\\n♣️当前接口无法访问(可能被墙)♣️\\n┋┋\\n请切换其他接口/切换网络环境\\n┋┋' + \n                      '\\n┗┅━┅━┅━┅━┅┅━┅━┅┛');\n    } else if (t < 1000) {\n        java.longToast('\\n💖【网络环境优良】\\n' + \n                      '┏┅━┅━┅━┅━┅┅━┅━┅┓\\n┋┋\\n' + \n                      logTime + '\\n┋┋\\n❤️延迟低，推荐使用此接口❤️\\n┋┋\\n网络环境优良，请继续保持状态\\n┋┋' + \n                      '\\n┗┅━┅━┅━┅━┅┅━┅━┅┛');\n    } else if (t >= 1000 && t < 2000) {\n        java.longToast('\\n💛【网络环境一般】\\n' + \n                      '┏┅━┅━┅━┅━┅┅━┅━┅┓\\n┋┋\\n' + \n                      logTime + '\\n┋┋\\n♦️延迟一般，勉强可使用♦️\\n┋┋\\n请切换其他接口或切换网络环境\\n┋┋' + \n                      '\\n┗┅━┅━┅━┅━┅┅━┅━┅┛');\n    } else if (t >= 2000 && t < 5000) {\n        java.longToast('\\n💔【网络环境堪忧】\\n' + \n                      '┏┅━┅━┅━┅━┅┅━┅━┅┓\\n┋┋\\n' + \n                      logTime + '\\n┋┋\\n♠延迟过高，不建议使用♠\\n┋┋\\n请切换其他接口或切换网络环境\\n┋┋' + \n                      '\\n┗┅━┅━┅━┅━┅┅━┅━┅┛');\n    }\n}\n\n\n\n//自定义音色\nfunction set_tone_id() {\n    let zdytone_id;\n    try {\n        zdytone_id = String(source.getLoginInfoMap().get('其他音色ID(确定后✔返回点击切换)'));\n        if (zdytone_id) {\n        \t  setArgument('sz', 1);\n          setArgument('tone', \"tone_id=\"+zdytone_id);\n          java.toast(\"\\n\\n已保存自定义音色\");\n        } else {\n            zdytone_id = '';\n        }\n    } catch (error) {\n        zdytone_id = '';\n    }\n    if (!zdytone_id) {\n        let toast = \"\\n\\n自定义音色为空\";\n        java.toast(toast);\n    }\n}\n\n\n//获取参数\nfunction getArgument(key) {\n    let open_argument = source.getVariable();\n    return getArguments(open_argument,key);\n}\n\n//设置参数\nfunction setArgument(key, value) {\n    let open_argument = source.getVariable();\n    open_argument = getArguments(open_argument,'');\n    open_argument[key] = value;\n    open_argument = JSON.stringify(open_argument, null, \"\\t\");\n    source.setVariable(open_argument);\n    return open_argument;\n}\n\n\n\n// 登录及登录检查\nfunction login_(openBrowser, checkMode) {\n    // java.removeCookie(\"snssdk.com\")\n    var cookie_ = String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) ? String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) : (source.getLoginInfoMap() ? source.getLoginInfoMap() : {})['手动登录Token']\n    // java.toast(cookie_)\n    if (cookie_ && cookie_ != \"\" && !checkMode) {\n        if (!2) {\n            java.toast(\"请不要重复登录，请先退出登录！\")\n        } else {\n            java.toast(\"您为填写token登录，请手动移除token后再次登录\")\n        }\n        return false\n    }\n    if (openBrowser) {\n        try {\n            java.startBrowserAwait(\"https://fanqienovel.com/\", \"登录\")\n        } catch (e) {\n            java.toast(e)\n        }\n    }\n    // java.log(\"snssdk cookie: \" + java.getCookie(\"snssdk.com\") + \"will be reomved\")\n    try {\n        cookie.removeCookie(\"snssdk.com\")\n    } catch (e) {}\n    // java.log(cookie)\n    var cookie_ = \"sessionid=\" + (String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) ? String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) : (source.getLoginInfoMap())['手动登录Token'])\n    let user\n    try {\n      user = JSON.parse(java.ajax(\"https://fanqienovel.com/api/user/info/v2,\" + JSON.stringify({\n        method: \"GET\",\n        headers: {\n          \"Cookie\": cookie_\n        }\n      }))).data.name\n     java.log(JSON.stringify(user))\n     } catch (e) {java.log(e)}\n    if (!cookie_ || cookie_ == \"sessionid=\" || !user) {\n        java.toast(\"未获取到登录凭据，登录失败\")\n        return false\n    }\n    java.toast(\"欢迎 \" + user + \"\\n登录成功！\")\n    return true\n}\n\nfunction login() // 一定程度上加上这个函数能够支持更多的版本\n{}\n\nfunction l2(a, b) {\n  try {\n    login_(a, b)\n  } catch (e) {\n    java.log(e+\"\\n\"+e.stack)\n  }\n}\n\n// 取消登录\nfunction logout() {\n    cookie.removeCookie(\"fanqienovel.com\");\n    cookie.removeCookie(\"snssdk.com\");\n    if (String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) ? String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) : (source.getLoginInfoMap() ? source.getLoginInfoMap() : {})['手动登录Token']) java.toast(\"请手动移除填写的Token\")\n    else java.toast(\"退出登录成功\");\n}\n\nfunction logToken() {\n  java.log(\n    String(\n      cookie.getKey(\n        \"fanqienovel.com\",\n        \"sessionid\"\n      )\n    ) ? String(\n     cookie.getKey(\n        \"fanqienovel.com\", \n        \"sessionid\"\n      )\n    ) : (\n     source.getLoginInfoMap()\n      ? source.getLoginInfoMap()\n      : {}\n    )['手动登录Token']\n  )\n  java.toast(\"登录Token已打印到日志，请妥善保管\")\n}\n\nfunction tutorial() {\n  java.longToast(\"\\n手动登录token功能用于部分用户的跨端登录，不知道是什么的留空就行\\n普通用户请使用下方的\\\"账号登录\\\"按钮登录自己的账号\")\n}\n\nfunction t() {\n  let gc = [\"(*^ω^*)\", \"(=^▽^=)\", \"(。’▽’。)♡\", \"٩(๑´0`๑)۶\", \"喵\", \"你好？\", \"逢考必过！\", \"早ﾉ☀\"]\n  rnd = Math.floor(Math.random() * 100)\n  if (typeof gc[rnd] != \"undefined\") {\n    java.toast(gc[rnd])\n  } else {\n    let res = JSON.parse(\n      java.ajax(\"https://v1.hitokoto.cn\")\n    )\n    java.toast(res.hitokoto)\n  }\n}\n\n// 音色设置，以及链接\nvar data = [\n    [\"正常模式\", \"\"],\n    [\"自定义音色\", \"\"],\n    [\"真人\", \"tone_id=0\"],\n    [\"甜美少女\", \"tone_id=1\"],\n    [\"清亮青叔\", \"tone_id=2\"],\n    [\"成熟大叔\", \"tone_id=4\"],\n    [\"开朗青年\", \"tone_id=5\"],\n    [\"温柔淑女\", \"tone_id=6\"],\n    [\"音频7\", \"tone_id=7\"],\n    [\"风雅青叔\", \"tone_id=8\"],\n    [\"音频9\", \"tone_id=9\"],\n    [\"音频10\", \"tone_id=10\"],\n    [\"音频11\", \"tone_id=11\"],\n    [\"清纯少女\", \"tone_id=12\"],\n    [\"音频14\", \"tone_id=14\"],\n    [\"音频15\", \"tone_id=15\"],\n    [\"音频16\", \"tone_id=16\"],\n    [\"磁性青叔\", \"tone_id=17\"],\n    [\"音频18\", \"tone_id=18\"],\n    [\"音频21\", \"tone_id=21\"],\n    [\"音频22\", \"tone_id=22\"],\n    [\"音频23\", \"tone_id=23\"],\n    [\"音频26\", \"tone_id=26\"],\n    [\"推文女声\", \"tone_id=27\"],\n    [\"亲切姐姐\", \"tone_id=28\"],\n    [\"儒雅大叔\", \"tone_id=29\"],\n    [\"优雅御姐\", \"tone_id=30\"],\n    [\"斯文青叔\", \"tone_id=31\"],\n    [\"知性主播\", \"tone_id=32\"],\n    [\"多人对话\", \"tone_id=51\"],\n    [\"音频53\", \"tone_id=53\"],\n    [\"音频55\", \"tone_id=55\"],\n    [\"音频56\", \"tone_id=56\"],\n    [\"音频57\", \"tone_id=57\"],\n    [\"音频58\", \"tone_id=58\"],\n    [\"音频59\", \"tone_id=59\"],\n    [\"音频60\", \"tone_id=60\"],\n     [\"音频61\", \"tone_id=61\"],\n     [\"音频62\", \"tone_id=62\"],\n     [\"音频63\", \"tone_id=63\"],\n     [\"音频64\", \"tone_id=64\"],\n     [\"音频67\", \"tone_id=67\"],   \n     [\"音频68\", \"tone_id=68\"],\n      [\"音频71\", \"tone_id=71\"],\n      [\"音频72\", \"tone_id=72\"],\n      [\"音频73\", \"tone_id=73\"],\n    [\"成熟升级\", \"tone_id=74\"],\n     [\"音频75\", \"tone_id=75\"],\n       [\"音频76\", \"tone_id=76\"],\n       [\"音频77\", \"tone_id=77\"],\n        [\"音频78\", \"tone_id=78\"],\n       [\"音频79\", \"tone_id=79\"],\n    [\"音频80\", \"tone_id=80\"],\n    [\"音频81\", \"tone_id=81\"],\n     [\"音频82\", \"tone_id=82\"],\n     [\"音频84\", \"tone_id=84\"],\n      [\"音频85\", \"tone_id=85\"],\n    [\"俏皮御姐\", \"tone_id=100\"],\n    // [\"邻家妹妹\", \"\"],\n    [\"音频101\", \"tone_id=101\"],\n    [\"音频102\", \"tone_id=102\"],\n    [\"双音灵动\", \"tone_id=103\"],\n    [\"音频104\", \"tone_id=104\"],\n    [\"王明军音\", \"tone_id=105\"],\n    [\"音频106\", \"tone_id=106\"],\n    [\"音频107\", \"tone_id=107\"],\n    [\"音频108\", \"tone_id=108\"],\n    [\"音频109\", \"tone_id=109\"],\n    [\"音频110\", \"tone_id=110\"],\n    [\"音频111\", \"tone_id=111\"],\n    [\"音频112\", \"tone_id=112\"],\n    [\"音频113\", \"tone_id=113\"],\n    [\"音频204\", \"tone_id=204\"]\n];\n\nvar modeNames = {3: \"小说模式\",2: \"听书模式\",8: \"漫画模式\",11: \"短剧模式\"};\n\n\n// 设置保存接口\nfunction set(num) {\n\tif (source.getVariable()==\"\") {\n    \n    reg(true);\n}\n    if (num < 0 || num >= data.length) {\n        java.longToast(\"无效的接口编号！\");\n        return;\n    }\n    var show = \"设置成功\\n当前模式：\";\n    var tips = \"\\n‼️设置完成请点击切换模式‼️\"\n    var setData = JSON.parse(source.getVariable())\n    \n    const currentTone = data[num][1];\n    if (currentTone === \"tone_id=0\" ) {\n        setData.st = 2;\n    } else {\n        setData.st = 3;\n    }\n    \n    setData.sz = num.toString();\n    setData.tone = currentTone;\n    source.setVariable(JSON.stringify(setData, null, \"\\t\"));\n    \n    var currentMode = setData.st || 3;\n    var msg = show + (modeNames[currentMode] || \"未知模式\") + \n              \"\\n音色设置：\" + data[num][0] + tips;\n    java.longToast(msg);\n}\n\n\n// 获取接口显示\nfunction get() {\n\tif (source.getVariable()==\"\") {\n    reg(true);\n    try {\n        var v = JSON.parse(source.getVariable() || \"{}\");\n        var currentMode = v.st || 3;\n        \n        var message = \"\\n当前模式：\" + (modeNames[currentMode] || \"未知模式\");\n        \n        if (currentMode === 2 || currentMode === 3) {\n            var sz = parseInt(v.sz || \"0\", 10);\n            var toneName = (sz >= 0 && sz < data.length) ? data[sz][0] : \"默认\";\n            message += \"\\n音色设置：\" + toneName;\n        }\n        \n        java.longToast(message);\n    } catch (e) {\n        java.longToast(\"获取模式失败：\" + e.message);\n    }\n}else{\n    try {\n        var v = JSON.parse(source.getVariable() || \"{}\");\n        var currentMode = v.st || 3;\n        \n        var message = \"\\n当前模式：\" + (modeNames[currentMode] || \"未知模式\");\n        \n        if (currentMode === 2 || currentMode === 3) {\n            var sz = parseInt(v.sz || \"0\", 10);\n            var toneName = (sz >= 0 && sz < data.length) ? data[sz][0] : \"默认\";\n            message += \"\\n音色设置：\" + toneName;\n        }\n        \n        java.longToast(message);\n    } catch (e) {\n        java.longToast(\"获取模式失败：\" + e.message);\n    }}\n}\n\n\n\n\n    \nfunction st() {\n    var v = JSON.parse(source.getVariable());\n    var mode = v.st || 3; \n\n    var newMode;\n    if (mode === 3) {\n        newMode = 2;\n    } else\n    \n     if (mode === 2) {\n        newMode = 8;\n    } else\n    \n     if (mode === 8) {\n        newMode = 11;\n    } else\n    \n    \n     if (mode === 11) {\n        newMode = 3;\n    } else {\n        newMode = 3; \n    }\n    v.st = newMode;\n\n   \n    v.sz = \"0\";\n    v.tone = \"\";\n\n    source.setVariable(JSON.stringify(v, null, \"\\t\"));\n\n    var show = \"设置成功\\n当前模式：\";\n    var tips = \"\\n请前往详情页刷新是否切换成功\";\n    var msg;\n\n    if (newMode === 3) {\n        msg = show + \"阅读模式\" + tips\n    } else if (newMode === 2) {\n    \t\n    \t   msg = show + \"听书模式\" + tips;\n    } else if (newMode === 8){\n    \t\n        msg = show + \"漫画模式\" + tips;\n    } else if (newMode === 11) {\n        msg = show + \"短剧模式\" + tips;\n    }\n\n    java.longToast(msg);\n}\n\nfunction reg(is) {\n    if (is) {\n        try {\n            var setData = {\n                \"search\": \"-1\",\n                \"tone_id\": \"-1\",\n                \"server\": \"http://114.66.37.222:1234\",\n                \"st\": 3,\n                \"sz\": \"0\",\n                \"tone\": \"\"\n            };\n            source.setVariable(JSON.stringify(setData, null, \"\\t\"));\n        } catch (e) {\n            var setData = {\n                \"search\": \"-1\",\n                \"tone_id\": \"-1\",\n                \"server\": \"http://114.66.37.222:1234\",\n                \"st\": 3,\n                \"sz\": \"0\",\n                \"tone\": \"\"\n            };\n            source.setVariable(JSON.stringify(setData, null, \"\\t\"));\n        }\n    }\n}\n\n\n\n\n\n\n\nfunction set_faxian(faxian) {\n\tif (source.getVariable()==\"\") {\n    reg(true);\n    var lists = JSON.parse(source.getVariable());\n    lists.faxian = faxian;\n    if (faxian == '小说') {\n        lists.st = 3;\n    }else if (faxian == '听书') {\n        lists.st = 2;\n    }else if (faxian == '漫画') {\n        lists.st = 8;\n    }else if (faxian == '短剧') {\n        lists.st = 11;\n    };\n    source.setVariable(JSON.stringify(lists, null, \"\\t\"));\n    java.toast('\\n已将类型切换为:' + faxian);\n}else{\n\tvar lists = JSON.parse(source.getVariable());\n    lists.faxian = faxian;\n    if (faxian == '小说') {\n        lists.st = 3;\n    }else if (faxian == '听书') {\n        lists.st = 2;\n    }else if (faxian == '漫画') {\n        lists.st = 8;\n    }else if (faxian == '短剧') {\n        lists.st = 11;\n    };\n    source.setVariable(JSON.stringify(lists, null, \"\\t\"));\n    java.toast('\\n已将类型切换为:' + faxian);\n}}\n\nyu=()=>{\nu=JSON.parse(source.getVariable()).faxian;\njava.toast(`\\n${u}`)\n}\n",
    "respondTime": 180000,
    "ruleBookInfo": {
      "author": "author",
      "coverUrl": "@js:java.getString(\"thumb_url\")",
      "init": "<js>\nvar model = [\n    [\"阅读模式\", \"\"],\n   [\"自定义音色\", \"\"],\n  [\"甜美少女\", \"tone_id=1\"],\n    [\"清亮青叔\", \"tone_id=2\"],\n    [\"成熟大叔\", \"tone_id=4\"],\n    [\"开朗青年\", \"tone_id=5\"],\n    [\"温柔淑女\", \"tone_id=6\"],\n    [\"音频7\", \"tone_id=7\"],\n    [\"风雅青叔\", \"tone_id=8\"],\n    [\"音色9\", \"tone_id=9\"],\n    [\"音色10\", \"tone_id=10\"],\n    [\"音色11\", \"tone_id=11\"],\n    [\"清纯少女\", \"tone_id=12\"],\n    [\"音色14\", \"tone_id=14\"],\n    [\"音色15\", \"tone_id=15\"],\n    [\"音色16\", \"tone_id=16\"],\n    [\"磁性青叔\", \"tone_id=17\"],\n    [\"音色18\", \"tone_id=18\"],\n    [\"音色21\", \"tone_id=21\"],\n    [\"音色22\", \"tone_id=22\"],\n    [\"音色23\", \"tone_id=23\"],\n    [\"音色26\", \"tone_id=26\"],\n    [\"推文女声\", \"tone_id=27\"],\n    [\"亲切姐姐\", \"tone_id=28\"],\n    [\"儒雅大叔\", \"tone_id=29\"],\n    [\"优雅御姐\", \"tone_id=30\"],\n    [\"斯文青叔\", \"tone_id=31\"],\n    [\"知性主播\", \"tone_id=32\"],\n    [\"多人对话\", \"tone_id=51\"],\n    [\"音色53\", \"tone_id=53\"],\n     [\"音色55\", \"tone_id=55\"],\n    [\"音色56\", \"tone_id=56\"],\n    [\"音色57\", \"tone_id=57\"],\n    [\"音色58\", \"tone_id=58\"],\n    [\"音色59\", \"tone_id=59\"],\n    [\"音色60\", \"tone_id=60\"],\n     [\"音色61\", \"tone_id=61\"],\n     [\"音色62\", \"tone_id=62\"],\n     [\"音色63\", \"tone_id=63\"],\n     [\"音色64\", \"tone_id=64\"],\n     [\"音色67\", \"tone_id=67\"],   \n     [\"音色68\", \"tone_id=68\"],\n      [\"音色71\", \"tone_id=71\"],\n      [\"音色72\", \"tone_id=72\"],\n      [\"音色73\", \"tone_id=73\"],\n    [\"成熟升级\", \"tone_id=74\"],\n     [\"音色75\", \"tone_id=75\"],\n       [\"音色76\", \"tone_id=76\"],\n       [\"音色77\", \"tone_id=77\"],\n        [\"音色78\", \"tone_id=78\"],\n       [\"音色79\", \"tone_id=79\"],\n    [\"多人升级\", \"tone_id=80\"],\n     [\"音色81\", \"tone_id=81\"],\n      [\"音色82\", \"tone_id=82\"],\n      [\"音色84\", \"tone_id=84\"],\n      [\"音色85\", \"tone_id=85\"],\n    \n    [\"俏皮御姐\", \"tone_id=100\"],\n    // [\"邻家妹妹\", \"\"],\n    [\"音色101\", \"tone_id=101\"],\n    [\"音色102\", \"tone_id=102\"],\n    [\"双音灵动\", \"tone_id=103\"],\n    [\"音色104\", \"tone_id=104\"],\n    [\"王明军音\", \"tone_id=105\"],\n    [\"音色106\", \"tone_id=106\"],\n    [\"音色107\", \"tone_id=107\"],\n   [\"音色108\", \"tone_id=108\"],\n    [\"音色109\", \"tone_id=109\"],\n     [\"音色110\", \"tone_id=110\"],\n      [\"音色111\", \"tone_id=111\"],\n        [\"音色112\", \"tone_id=112\"],\n       [\"音色113\", \"tone_id=113\"],\n    [\"音色204\", \"tone_id=204\"]\n];\nvar s = JSON.parse(source.getVariable())\n\nserver = s.server? s.server: source.variableComment.split(\"\\n\")[0];\njava.put(\"server\",server);\n\nif (s.st == 1) { \n   book.putVariable(\"custom\", JSON.stringify(s, null, \"\\t\"));\n   s.st = 0\n   source.setVariable(JSON.stringify(s, null, \"\\t\"));\n}\n\nvar modeTips = {\"3\": \"\\n📖 小说模式\",\"2\": \"\\n🎧 听书模式\", \"8\": \"\\n🌈 漫画模式\",\"11\": \"\\n🎬 短剧模式\"};\n\nfunction get(index) {\n    var currentMode = s.st || 0;\n    var modeTip = modeTips[currentMode] || \"\";\n    \n    if (currentMode == 2 || currentMode == 3) {\n        var v = (book.getVariable('custom') != \"\") ? book.getVariable('custom') : source.getVariable();\n        try {\n            var szStr = JSON.parse(v).sz;\n            var sz = parseInt(szStr, 10);\n            if (sz < 0 || sz >= model.length) {\n                sz = 0;\n            }\n            var show = modeTip + \"\\n当前音色：\";\n            java.longToast(show + model[sz][0] + \"\\n部分书籍支持真人发音\");\n        } catch (e) {\n            java.longToast(modeTip + \"\\n获取音色失败，使用默认。\");\n        }\n    } else {\n        java.longToast(modeTip);\n    }\n}\n\n\n\n\nfunction getTones(tones, run) {\n    if (run == 0) {\n    var voiceTones = tones.split(',').map(function(tone) {\n        var voice = model.find(function(item) {\n            return item[1] == `tone_id=${tone}`;\n        });\n        return voice ? voice[0] : '';\n    });\n    return '🎼 音色支持：' + voiceTones.filter(Boolean) + '\\n\\u200b\\n';\n    } \n  return ''\n}\n\nvar Res  = JSON.parse(result);\nvar data = Res.page || Res.data;\ndata = (Array.isArray(data) ? data[0] : data.book_info) || data;\nvar type = data.genre;\njava.put(\"type\",type);\nget(type);\nvar tts_info = getTones(data.tones, data.genre);\njava.put(\"tts_info\", tts_info);\nJSON.stringify(data);\n</js>",
      "intro": "&nbsp;&nbsp;\n📖 书名：{{$.book_name}}{{'\\n'+'​'}}\n📕 源名：{{$.original_book_name}}\n📖 别名：{{$.book_flight_alias_name}}\n🆔 编号：{{$..book_id}}\n✏️ 开坑：{{$.create_time##T|\\+.*## }}\n🏷️ 标签：{{$.tags}}\n✏️ 首发：{{$.create_time##T|\\+.*## }}{{\"\\n\"+\"​\"}}\n🕰 发布：{{java.timeFormatUTC(java.getString('$.last_chapter_update_time')*1000,'yyyy-MM-dd HH:mm:ss',0)}}{{\"\\n\"+\"​\"}}\n🌸 更新：{{String(java.timeFormat(java.getString('$.last_chapter_first_pass_time')*1000)).replace(/\\//g,'\\-')}}{{\"\\n\"+\"​\"}}\n👤 主角：{{$.roles##\\[|\\\"|\\]}}\n🗣 音色：{{$.tones}}\n{{java.get('tts_info')}}\n👁️ 在线：{{$.read_count}}人在读\n🔗 书籍状态：__status__{{\"\\n\"+\"​\"}}\n👁️ 在线大概①：{{$.sub_info}}{{\"\\n\"+\"​\"}}\n👁️ 在线总数②：{{$.read_count}}人在读{{\"\\n\"+\"​\"}}\n🏷️ 标签：{{$.complete_category##/##,}}{{'\\n'+'​'}}\n🏷️ 标签：{{$.tags}}{{'\\n'+'​'}}\n🔖 标签①：{{$.category}}{{\"\\n\"+\"​\"}}\n🔖 标签②：{{$.tags}}{{\"\\n\"+\"​\"}}\n🔖 标签③：{{$.complete_category}}{{\"\\n\"+\"​\"}}\n🔗 来源：{{$..source}}{{'\\n'+'​'}}\n📜 简介：{{$.abstract}}{{\"\\n\"+\"​\"}}\n📍 {{$.copyright_info##，.*##。}}{{\"\\n\"+\"​\"}}\n\n{{getNovelComment(java.getString(\"$.book_id\"),java.get(\"type\"))}} \n@js:result.replace(/.+：(人在读)?\\n/g,\"\").replace('__status__', (java.getString('$.book_search_visible') == 'true' ? '正常' : (java.getString('$.tomato_book_status') == '3' ? '下架' : '小黑屋')))\n",
      "kind": "男生{{$.gender}}女生\n{{$.category}}\n连载{{$.creation_status}}完结\n{{$.score}}分\n{{java.timeFormatUTC(java.getString(\"last_chapter_update_time\")*1000,'yyyy-MM-dd',8)}} \n##连载0|1完结|男生0|1女生\n@js:result\n.replace(\"男生2女生\",\"出版\")\n.replace(\"连载4完结\",\"断更\")\n.replace(\"连载-1完结\",\"未知\");",
      "lastChapter": "{{$.last_chapter_title}} • {{java.timeFormat(java.getString(\"last_chapter_update_time\")*1000)}}",
      "name": "book_name",
      "tocUrl": "$.book_id\n@js:\njava.put('book_id', result);\njava.get(\"server\")  + '/api/index.php?api=directory&book_id=' + result;",
      "wordCount": "word_number"
    },
    "ruleContent": {
      "content": "<js>\nvar item_id = java.hexDecodeToString(result);\nvar book_id = java.get('book_id');\nvar type = String(java.get('type'));\n\nvar key=java.base64Encode(密钥());\n\nvar v = (book.getVariable('custom') != \"\") ? book.getVariable('custom') : source.getVariable();\nvar v = JSON.parse(v)\nvar sz = v.sz;\nvar tone = v.tone;\nvar server = java.get(\"server\");\n\nif (type == 1) {\n  book.type = 64;\n} else if (type == 4 || sz != 0) {\n  book.type = 32;\n} else {\n  book.type = 8;\n}\n\nif (type == 4 || sz != 0) {\n    if (type == 4) {\n    url = server + `/api/index.php?api=content&ts=听书&tone_id=1&item_ids=${item_id}&key=${key}`; \n} else if (sz != 0) {\n    url = server + `/api/index.php?api=content&ts=听书&${tone}&item_ids=${item_id}&key=${key}`; \n}\n  try {\n    result = JSON.parse(java.ajax(url)).data.content; \n  } catch(e) { result = \"该书不支持当前音色，请更换并刷新\"; }\n} else if (type == 203) {\n  surl = server + `/api/index.php?api=video&ts=短剧&item_id=${item_id}&key=${key}`; \n  param = {\"biz_param\":{\"device_level\":3,\"need_all_video_definition\":false,\"need_mp4_align\":false,\"use_os_player\":false,\"video_platform\":1024},\"video_id\": item_id} \n  head = {\n    \"body\": JSON.stringify(param),\n    \"method\": \"POST\",\n    \"headers\": {\n      \"User-Agent\": \"com.dragon.read/65532 (Linux; U; Android 13; zh_CN; PHY120; Build/TP1A.220905.001; Cronet/TTNetVersion:b2888ab3 2024-06-12 QuicVersion:1886aac1 2023-11-17)\"\n    }\n  }\n  murl = surl + JSON.stringify(head)\n  try {\nresult = JSON.parse(java.ajax(surl)).data.video_url;\nif(book.durChapterIndex == chapter.index) {\n\t\tjava.startBrowser(`data:text/html;charset=utf-8,<html><title>${chapter.title}</title><style>body {background-color: black;} video {position: fixed; top: 0; left: 0; width: 100%; height: 100%;}</style><body><video controls><source src=\"${result}\" type=\"video/mp4\"></video></body></html>`, chapter.title)\n\t\tjava.toast('正在加载视频\\n视频加载较慢，请耐心等待')\n\t }\n  result = '【刷新正文】播放\\n直链:\\n'+result\n  } catch(e) { result = '视频获取失败，尝试重新获取' }\n} else if (type == 1) \n{\nlet url = server + '/api/index.php?api=manga&item_ids=' + item_id+'&key='+key+'';\njava.log(url)\npi = JSON.parse(java.ajax(url)).data.images\nresult = pi.map(i=> `<img src=\"${i}\">`).join(\"\\n\")\n}else{\nlet url = server + '/api/index.php?api=content&api_type=batch&item_ids=' + item_id+'&key='+key+'';\nlet res = JSON.parse(java.ajax(url));\n\nfunction getContent(response) {\n    if (response.success && response.data && Array.isArray(response.data) && response.data[0] && response.data[0].content) {\n        return response.data[0].content;\n    }\n    else if (response.data && response.data.content) {\n        let mat = response.data.content.match(/<article>([\\s\\S]*?)<\\/article>/); \n        try {\n            let cnt = JSON.parse(\n                mat\n                    ? mat[1].replace(/\\&/g, '\"').replace(/\\;/g, \"\").replace(/\\#34/g, \"\")\n                    : response.data.content\n            );\n            return (mat ? cnt.skeleton.data : cnt.picInfos)\n                .map((i) => {\n                    let path = mat\n                        ? cnt.materials[i.element_name].data.web_uri\n                        : \"novel-pic/\" + i.md5;\n                    return `<img src=\"https://p6-novel.byteimg.com/origin/${path}\">`;\n                })\n                .join(\"<br>\");\n        } catch (e) {\n            mat = response.data.content.match(/<body>([\\s\\S]*?)<\\/body>/) \n            return (mat ? mat[1] : response.data.content).toString()\n                .replace(/\\<\\!DOCTYPE html.*/g, \"\")\n                .replace(/\\<tt_keyword_ad.*\\<\\/tt_keyword_ad\\>/, \"\")\n                .replace(/\\<a epub.*\\>\\<\\/a\\>/g, \"\");\n        }\n    }\n    return \"无法识别的数据格式，预计半小时恢复正常！(看到这提示，如果不是审核文，那就意味有人又在作死下载书籍了！)\";\n}\n\nresult = getContent(res);\n}\nresult\n</js>"
    },
    "ruleExplore": {
      "author": "author||copyright",
      "bookList": "<js>\nlet list = [];\nlet resultData = JSON.parse(result);\n\nlet targetData = resultData.data || resultData.list || resultData.book_list || \n                resultData.publication_list || resultData.result || resultData;\n           \nif (targetData != null && targetData.book_shelf_info) {\n    let bookIds = targetData.book_shelf_info.map(item => `{\"book_id\": \"${item.book_id}\"}`).join(',');\n    \n    let booksData = java.ajax(\n`https://fanqienovel.com/api/bookshelf/multidetail,{\"method\": \"post\",\"body\": {\"books\":[${bookIds}]}}`\n        );\n    \n    let books = JSON.parse(booksData).data.detail_list;\n    for (let i in books) {\n        let d = books[i];\n        list.push({\n            src: d,\n            book_name: d.book_name,\n            author: d.author,\n            category:d.category,\n            tags:d.tags,\n            word_number:d.word_number,\n            lastChapterTitle: d.last_chapter_title,\n            abstract: d.abstract,\n            book_id: d.book_id,\n        });\n    }\n} else {\n    list = targetData.content || targetData;\n}\n\nJSON.stringify({data: list})\n</js>\ndata.data||data.list||book_list||data.publication_list||data.result||data||data..video_data[*]||data.book_info[*]||data..book_data[*]",
      "bookUrl": "https://api5-normal-sinfonlineb.fqnovel.com/reading/bookapi/multi-detail/v/?aid=1967&iid=1&version_code=999&book_id={{$.book_id||$.series_id}}",
      "coverUrl": "http://p6-novel.byteimg.com/large/{$.thumb_uri}||$.thumb_url||thumbUri||cover",
      "intro": "abstract||video_desc##\\n",
      "kind": "男生{{$.gender}}女生\n连载{{$.creation_status}}完结\n{{$.score}}分\n{{$..text}}\n{{$.sub_info}}\n##连载0|1完结|男生0|1女生|男生女生[\\s\\S]*\n@js:result\n.replace(\"男生2女生\",\"出版\")\n.replace(\"连载4完结\",\"断更\")\n.replace(\"连载-1完结\",\"未知\");",
      "name": "book_name||bookName||title",
      "wordCount": "$.word_number"
    },
    "ruleSearch": {
      "author": "author||$..copyright",
      "bookList": "<js>\nlet list = [];\nlet book_list = [];\nlet res = JSON.parse(result);\n\ntry {\n  if (res.data.search_tabs) {\n    for (let i = 0; i < res.data.search_tabs.length; i++) {\n        let books = res[\"data\"][\"search_tabs\"][i][\"data\"];\n        if (books != null) list = list.concat(books);\n    }\n  }\n} catch (e) {}\n\nfor (let $ of list) {\n   book_list.push($.book_data ? $.book_data[0] : ($.video_data ? $.video_data[0] : $));\n}\n\nJSON.stringify(book_list)\n</js>$[*]",
      "bookUrl": "https://api5-normal-sinfonlineb.fqnovel.com/reading/bookapi/multi-detail/v/?aid=1967&iid=1&version_code=999&book_id={{$.book_id||$.series_id}}",
      "coverUrl": "@js:java.getString(\"thumb_url||cover\")",
      "intro": "abstract||$..series_intro##\\n",
      "kind": "男生{{$.gender}}女生\n连载{{$.creation_status}}完结\n{{$.score}}分\n{{$..text}}\n{{$.sub_info}}\n##连载0|1完结|男生0|1女生|男生女生[\\s\\S]*\n@js:result\n.replace(\"男生2女生\",\"出版\")\n.replace(\"连载4完结\",\"断更\")\n.replace(\"连载-1完结\",\"未知\");",
      "lastChapter": "https://api5-normal-sinfonlineb.fqnovel.com/reading/bookapi/multi-detail/v/?aid=1967&book_id={{$.book_id}}\n<js>\nlet data=JSON.parse(java.ajax(result)).data[0];\ndata[\"last_chapter_title\"] + \" • \" + java.timeFormat(data[\"last_chapter_update_time\"]*1000);\n</js>",
      "name": "book_name||$..series_title##（别名：.*?）",
      "wordCount": "word_number"
    },
    "ruleToc": {
      "chapterList": "<js>\nvar type = java.get('type');\nvar v = (book.getVariable('custom') != \"\") ? book.getVariable('custom') : source.getVariable();\nvar sz = JSON.parse(v).sz;\nif (type == 1) {\n  book.type = 64;\n} else if (type == 4 || sz != 0) {\n  book.type = 32;\n} else {\n  book.type = 8;\n}\nresult\n</js>data.item_data_list[*]",
      "chapterName": "title",
      "chapterUrl": "$.item_id\n<js>java.base64Encode(result)</js>\ndata:;base64,{{result}},{\"type\":\"fqpyc\"}",
      "updateTime": "{{$.volume_name}} | {{$.chapter_word_number}}字 | {{java.timeFormatUTC(java.getString(\"first_pass_time\") * 1000, 'yyyy-MM-dd HH:mm:ss', 28800000)}}##第一卷：默认\n@js:\nif (result.startsWith(\" |\")) result = result.slice(2)\nif (result.startsWith(\"| \")) result = result.slice(2)\nresult"
    },
    "searchUrl": "@js:\nfunction initData() {\n    var defaultData = {\n        search: \"-1\",\n        tone_id: \"-1\",\n        server: \"http://114.66.37.222:1234\",\n        st: 3,\n        sz: \"0\",\n        tone: \"\"\n    };\n    source.setVariable(JSON.stringify(defaultData, null, \"\\t\"));\n    return defaultData;\n}\n\nvar data;\ntry {\n    var jsonString = source.getVariable() || \"{}\";\n    data = JSON.parse(jsonString);\n    if (Object.keys(data).length === 0) throw new Error();\n} catch (e) {\n    data = initData();\n}\n\nvar server = data.server || (\n    source.variableComment ? \n    source.variableComment.split('\\n')[0].trim() : \n    \"http://nuu1.jingluo.love\"\n);\n\nvar modeMap = {\n    \"@小说\": 3, \"@漫画\":8, \"@听书\":2, \"@短剧\":11,\n    \"③\": 3, \"⑧\":8, \"②\":2, \"⑩\":11,\n    \n    \"m:\":8, \"m：\":8, \"t:\":2, \"t：\":2, \"d:\":11, \"d：\":11\n};\n\nfor (var keyWord in modeMap) {\n    if (modeMap.hasOwnProperty(keyWord) && key.indexOf(keyWord) > -1) {\n        data.st = modeMap[keyWord];\n        key = key.replace(keyWord, \"\");\n        break;\n    }\n}\n\nvar isBookId = key.length === 19 && /^\\d+$/.test(key);\n\n\n\n\nvar result;\nif (isBookId) {\n    result =  'https://api5-normal-sinfonlineb.fqnovel.com/reading/bookapi/multi-detail/v/?aid=1967&iid=1&version_code=999&book_id=' + key;\n} else {\n    result = server + '/api/index.php?api=search&key=' + encodeURIComponent(key) \n    \t  + '&offset=' + ((page -1)*10) \n    \t\n           + '&tab_type=' + data.st;\n}\n\nresult;",
    "weight": 0
  }
]